SET sql_mode=ORACLE;
SET SESSION debug='+d,skip_dd_table_access_check';
set @@udt_format_result='DBA';
#
# test of create type as table
#
create or replace type t_air as object(id int,type varchar(20));
SELECT name,type,options FROM mysql.routines where name='t_air';
name	type	options
t_air	TYPE	ref_count=0;udt_size=86;
CREATE OR REPLACE TYPE t_air_table AS table OF t_air;
CREATE OR REPLACE TYPE t_air_table AS table OF test.t_air11;
ERROR 42000: TYPE t_air11 does not exist
SELECT name,type,options FROM mysql.routines where name='t_air' or name='t_air_table';
name	type	options
t_air	TYPE	ref_count=1;udt_size=86;
t_air_table	TYPE	nested_table_udt=t_air;ref_count=0;table_type=1;udt_size=86;varray_limit=0;
show create type t_air_table;
Type	sql_mode	Create Type	character_set_client	collation_connection	Database Collation
t_air_table	PIPES_AS_CONCAT,ANSI_QUOTES,IGNORE_SPACE,ONLY_FULL_GROUP_BY,ORACLE,STRICT_TRANS_TABLES,STRICT_ALL_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION	CREATE DEFINER="root"@"localhost" TYPE "t_air_table" AS TABLE OF test.t_air	utf8mb4	utf8mb4_0900_ai_ci	utf8mb4_0900_ai_ci
#
# test of select type_table
#
select t_air_table(t_air(1,'aa'),t_air(2,'bb'));
t_air_table(t_air(1,'aa'),t_air(2,'bb'))
t_air_table(t_air(1,aa),t_air(2,bb))
select t_air_table(t_air('b','aa'),t_air(2,'bb'));
ERROR HY000: Incorrect integer value: 'b' for column 'id' at row 1
select t_air_table(null);
t_air_table(null)
t_air_table(NULL)
select t_air_table(t_air1('b','aa'));
ERROR 42000: FUNCTION test.t_air1 does not exist
#
# test of table function
#
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb')));
id	type
1	aa
2	bb
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) a;
id	type
1	aa
2	bb
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) a union
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) a;
id	type
1	aa
2	bb
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) union
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb')));
id	type
1	aa
2	bb
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) a,table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) b;
id	type	id	type
1	aa	1	aa
1	aa	2	bb
2	bb	1	aa
2	bb	2	bb
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))),table(t_air_table(t_air(1,'aa'),t_air(2,'bb')));
id	type	id	type
1	aa	1	aa
1	aa	2	bb
2	bb	1	aa
2	bb	2	bb
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) a,table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) a;
ERROR 42000: Not unique table/alias: 'a'
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) where id>1;
id	type
2	bb
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) where type is not null;
id	type
1	aa
2	bb
select * from table(1);
ERROR HY000: cannot access rows from a non-nested table item
select * from table(t_air(1,'aa'));
ERROR HY000: cannot access rows from a non-nested table item
#
# test of create table as select table function
#
create table ss_table as select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb')));
select * from ss_table;
id	type
1	aa
2	bb
insert into ss_table select * from table(t_air_table(t_air(3,'cc'),t_air(4,'dd')));
select * from ss_table;
id	type
1	aa
2	bb
3	cc
4	dd
drop table ss_table;
#
# test of create type as VARRAY
#
SELECT name,type,options FROM mysql.routines where name='t_air';
name	type	options
t_air	TYPE	ref_count=1;udt_size=86;
CREATE OR REPLACE TYPE t_air_varray AS VARRAY(1) OF t_air;
CREATE OR REPLACE TYPE t_air_varray AS VARRAY(1) OF t_air11;
ERROR 42000: TYPE t_air11 does not exist
show variables like 'tf_udt_table_max_rows';
Variable_name	Value
tf_udt_table_max_rows	1048576
set GLOBAL tf_udt_table_max_rows=10485;
show variables like 'tf_udt_table_max_rows';
Variable_name	Value
tf_udt_table_max_rows	10485
CREATE OR REPLACE TYPE t_air_varray AS VARRAY(10486) OF test.t_air;
ERROR HY000: The number of records generated by UDT_TABLE() cannot exceed 1048576 (10486 requested). Try increasing @@tf_udt_table_max_rows to a larger value.
SELECT name,type,options FROM mysql.routines where name='t_air' or name='t_air_table';
name	type	options
t_air	TYPE	ref_count=2;udt_size=86;
t_air_table	TYPE	nested_table_udt=t_air;ref_count=0;table_type=1;udt_size=86;varray_limit=0;
show create type t_air_varray;
Type	sql_mode	Create Type	character_set_client	collation_connection	Database Collation
t_air_varray	PIPES_AS_CONCAT,ANSI_QUOTES,IGNORE_SPACE,ONLY_FULL_GROUP_BY,ORACLE,STRICT_TRANS_TABLES,STRICT_ALL_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION	CREATE DEFINER="root"@"localhost" TYPE "t_air_varray" AS VARRAY(1) OF test.t_air	utf8mb4	utf8mb4_0900_ai_ci	utf8mb4_0900_ai_ci
set GLOBAL tf_udt_table_max_rows=1048576;
#
# test of select type_array
#
select t_air_varray(t_air(1,'aa'));
t_air_varray(t_air(1,'aa'))
t_air_varray(t_air(1,aa))
select t_air_varray(t_air(1,'aa'),t_air(2,'bb'));
ERROR HY000: Out of memory
select t_air_varray(t_air('b','aa'));
ERROR HY000: Incorrect integer value: 'b' for column 'id' at row 1
select t_air_varray(null);
t_air_varray(null)
t_air_varray(NULL)
select t_air_varray(t_air1('b','aa'));
ERROR 42000: FUNCTION test.t_air1 does not exist
#
# test of table function
#
CREATE OR REPLACE TYPE t_air_varray AS VARRAY(10) OF t_air;
select * from table(t_air_varray(t_air(1,'aa'),t_air(2,'bb')));
id	type
1	aa
2	bb
select * from table(t_air_varray(t_air(1,'aa'),t_air(2,'bb'))) a;
id	type
1	aa
2	bb
select * from table(t_air_varray(t_air(1,'aa'),t_air(2,'bb'))) a union
select * from table(t_air_varray(t_air(1,'aa'),t_air(2,'bb'))) a;
id	type
1	aa
2	bb
select * from table(t_air_varray(t_air(1,'aa'),t_air(2,'bb'))) union
select * from table(t_air_varray(t_air(1,'aa'),t_air(2,'bb')));
id	type
1	aa
2	bb
select * from table(t_air_varray(t_air(1,'aa'),t_air(2,'bb'))) a,table(t_air_varray(t_air(1,'aa'),t_air(2,'bb'))) b;
id	type	id	type
1	aa	1	aa
1	aa	2	bb
2	bb	1	aa
2	bb	2	bb
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) a,table(t_air_varray(t_air(1,'aa'),t_air(2,'bb'))) b;
id	type	id	type
1	aa	1	aa
1	aa	2	bb
2	bb	1	aa
2	bb	2	bb
select * from table(t_air_varray(t_air(1,'aa'),t_air(2,'bb'))),table(t_air_varray(t_air(1,'aa'),t_air(2,'bb')));
id	type	id	type
1	aa	1	aa
1	aa	2	bb
2	bb	1	aa
2	bb	2	bb
select * from table(t_air_varray(t_air(1,'aa'),t_air(2,'bb'))),table(t_air_varray(t_air(11,'aa1'),t_air(21,'bb2'))),table(t_air_varray(t_air(10,'aa10'),t_air(20,'bb20')));
id	type	id	type	id	type
1	aa	11	aa1	10	aa10
1	aa	11	aa1	20	bb20
1	aa	21	bb2	10	aa10
1	aa	21	bb2	20	bb20
2	bb	11	aa1	10	aa10
2	bb	11	aa1	20	bb20
2	bb	21	bb2	10	aa10
2	bb	21	bb2	20	bb20
select * from table(t_air_varray(t_air(1,'aa'),t_air(2,'bb'))) a,table(t_air_varray(t_air(1,'aa'),t_air(2,'bb'))) a;
ERROR 42000: Not unique table/alias: 'a'
select * from table(t_air_varray(t_air(1,'aa'),t_air(2,'bb'))) where id>1;
id	type
2	bb
select * from table(t_air_varray(t_air(1,'aa'),t_air(2,'bb'))) where type is not null;
id	type
1	aa
2	bb
#
# test of create table as select table function
#
create table ss_table as select * from table(t_air_varray(t_air(1,'aa'),t_air(2,'bb')));
select * from ss_table;
id	type
1	aa
2	bb
insert into ss_table select * from table(t_air_varray(t_air(3,'cc'),t_air(4,'dd')));
select * from ss_table;
id	type
1	aa
2	bb
3	cc
4	dd
insert into ss_table values(t_air_varray(t_air(3,'cc'),t_air(4,'dd')),'a');
ERROR HY000: inconsistent datatypes: udt type and non udt type
select * from ss_table where type=t_air_varray(t_air(3,'cc'),t_air(4,'dd'));
ERROR 42000: This version of MySQL doesn't yet support 'compare with udt table'
select t_air_varray(t_air(3,'cc'),t_air(4,'dd'))+1 from dual;
ERROR 42000: This version of MySQL doesn't yet support 'udt columns used in function'
drop table ss_table;
#
# test of error with udt table
#
create table tt_of of t_air_table;
ERROR 42000: This version of MySQL doesn't yet support 'create table with udt table'
create table tabl1 (id int, u1 t_air_table);
ERROR 42000: This version of MySQL doesn't yet support 'create table with udt table column'
CREATE OR REPLACE TYPE t_air_varray1 AS VARRAY(10) OF t_air_varray;
ERROR 42000: This version of MySQL doesn't yet support 'create type as table object of udt table object'
create table table_of of t_air;
insert into table_of select t_air_table(t_air(1,'aa'),t_air(2,'bb')),t_air_table(t_air(1,'aa'),t_air(2,'bb'));
ERROR HY000: inconsistent datatypes: udt type and non udt type
drop table table_of;
#
# test of conditions of with udt table
#
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) where t_air_table(t_air(1,'aa'),t_air(2,'bb'))=t_air_table(t_air(1,'aa'),t_air(2,'bb'));
id	type
1	aa
2	bb
select * from table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) where t_air_table(t_air(1,'aa'),t_air(2,'bb'))=t_air_varray(t_air(1,'aa'));
ERROR HY000: inconsistent datatypes: expected 'test'.'t_air_varray' got 'test'.'t_air_table'
#
# test of different db of udt table
#
create database db2;
use db2;
create or replace type t_air as object(id int,type varchar(10));
CREATE OR REPLACE TYPE t_air_table AS table OF t_air;
use test;
select * from table(db2.t_air_table(db2.t_air(1,'aa'),db2.t_air(2,'bb')));
id	type
1	aa
2	bb
select * from table(db2.t_air_table(db2.t_air(1,'aa'),t_air(2,'bb')));
ERROR HY000: inconsistent datatypes: expected 'db2'.'t_air' got 'test'.'t_air'
drop database db2;
#
# test of table(a.udt_col)
#
create table tt_air(id int,name t_air);
insert into tt_air values(10,t_air(10,'aabb10'));
insert into tt_air values(11,t_air(11,'aabb11'));
select * from tt_air;
id	name
10	id:10 | type:aabb10
11	id:11 | type:aabb11
select a.id,a.type from tt_air b,table(t_air_table(b.name)) a;
id	type
10	aabb10
11	aabb11
select a.id,a.type from tt_air b,table(t_air_table(b.name,t_air(1,'aa'))) a;
id	type
10	aabb10
1	aa
11	aabb11
1	aa
select a.id,a.type from tt_air b,table(b.name) a;
ERROR HY000: cannot access rows from a non-nested table item
select t_air_table(a.name) from tt_air a;
t_air_table(a.name)
t_air_table(t_air(10,aabb10))
t_air_table(t_air(11,aabb11))
select t_air_table(a.name,t_air(2,'aaa')) from tt_air a;
t_air_table(a.name,t_air(2,'aaa'))
t_air_table(t_air(10,aabb10),t_air(2,aaa))
t_air_table(t_air(11,aabb11),t_air(2,aaa))
select * from tt_air a order by  t_air_table(a.name);
ERROR HY000: cannot ORDER objects without window function or ORDER method
select name || t_air_table(name) from tt_air;
ERROR 42000: This version of MySQL doesn't yet support 'udt columns used in function'
select t_air_table(name)-1 from tt_air;
ERROR 42000: This version of MySQL doesn't yet support 'udt columns used in function'
drop table tt_air;
#
# for cursor loop
#
CREATE or replace PROCEDURE p1() as
CURSOR c_country IS SELECT * FROM table(t_air_table(t_air(1,'aa'),t_air(2,'bb')));
rec c_country%ROWTYPE;
BEGIN
FOR rec IN c_country
loop
SELECT rec.id,rec.type;
END loop;
END;
$$
CALL p1();
rec.id	rec.type
1	aa
rec.id	rec.type
2	bb
DROP PROCEDURE p1;
drop type t_air_table;
SELECT name,type,options FROM mysql.routines where name='t_air';
name	type	options
t_air	TYPE	ref_count=1;udt_size=86;
drop type t_air_varray;
SELECT name,type,options FROM mysql.routines where name='t_air';
name	type	options
t_air	TYPE	ref_count=0;udt_size=86;
drop type t_air;
#
# test of for loop
#
CREATE or replace PROCEDURE p1(n int) as
BEGIN
for x IN reverse n-2 .. n LOOP
select x;
END LOOP;
end;
$$
call p1(5);
x
5
x
4
x
3
drop PROCEDURE p1;
#
# test of for loop
#
CREATE or replace PROCEDURE p1(n int) as
BEGIN
for x IN n-2 .. n LOOP
select x;
END LOOP;
end;
$$
call p1(5);
x
3
x
4
x
5
drop PROCEDURE p1;
#
# test of for loop
#
CREATE or replace PROCEDURE p1(n int) as
BEGIN
for x IN n .. abs(n) LOOP
select x;
END LOOP;
end;
$$
call p1(-1);
x
-1
x
0
x
1
drop PROCEDURE p1;
#
# for cursor loop
#
CREATE TABLE t1 (id2 int, id int, en1 enum('aaa','a','b','c'));
INSERT INTO t1 VALUES(1,1,'aaa'),(2,1,'a'),(3,3,'b'),(4,1,'c');
CREATE PROCEDURE p1() as
CURSOR c_country IS SELECT * FROM t1;
rec c_country%ROWTYPE;
BEGIN
FOR rec IN c_country
loop
SELECT rec.en1;
END loop;
END;
$$
CALL p1();
rec.en1
aaa
rec.en1
a
rec.en1
b
rec.en1
c
DROP PROCEDURE p1;
#
# for cursor loop
#
CREATE or replace PROCEDURE p1() as
CURSOR c_country(j int) IS SELECT * FROM t1 where id=j;
rec c_country%ROWTYPE;
BEGIN
FOR rec IN c_country(1)
loop
SELECT rec.en1;
END loop;
END;
$$
CALL p1();
rec.en1
aaa
rec.en1
a
rec.en1
c
DROP PROCEDURE p1;
DROP TABLE t1;
#
# test of create type with bit column
#
create or replace type type_bit as object(id int, bitcol bit(64), name varchar(20));
select type_bit(1,b'1011111111111111','aaa');
type_bit(1,b'1011111111111111','aaa')
id:1 | bitcol:0xBFFF | name:aaa
select type_bit(2,0xffa123,'aaa');
type_bit(2,0xffa123,'aaa')
id:2 | bitcol:0xFFA123 | name:aaa
create table tt_bit(id int,name type_bit);
insert into tt_bit values(10,type_bit(1,b'1011111111111111','aaa'));
insert into tt_bit values(11,type_bit(11,0xffa123,'bbb'));
insert into tt_bit values(12,null);
select * from tt_bit;
id	name
10	id:1 | bitcol:0xBFFF | name:aaa
11	id:11 | bitcol:0xFFA123 | name:bbb
12	NULL
create table bit_of as select * from tt_bit;
select * from bit_of;
id	name
10	id:1 | bitcol:0xBFFF | name:aaa
11	id:11 | bitcol:0xFFA123 | name:bbb
12	NULL
drop table tt_bit;
drop table bit_of;
drop type type_bit;
# nulls first test
create type t_air as object(id int, type varchar(10));
create type t_air_table as table of t_air;
create type t_air_varray as varray(10) of t_air;
select a.id,a.type,b.id,b.type from
table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) a
full join table(t_air_varray(t_air(1,'cc'),t_air(4,'dd'))) b
on a.id=b.id
order by a.id nulls first;
id	type	id	type
NULL	NULL	4	dd
1	aa	1	cc
2	bb	NULL	NULL
select a.id,a.type,b.id,b.type from
table(t_air_table(t_air(1,'aa'),t_air(2,'bb'))) a
full join table(t_air_varray(t_air(1,'cc'),t_air(4,'dd'))) b
on a.id=b.id
order by a.id nulls last;
id	type	id	type
1	aa	1	cc
2	bb	NULL	NULL
NULL	NULL	4	dd
drop type t_air_varray;
drop type t_air_table;
drop type t_air;
#
# test of bug8845
#
create or replace type var_test1 as object(col0 tinyint,col1 smallint,col2 mediumint, col3 int,col4 integer, col5 bigint,col6 decimal(10, 2),
col7 dec(10, 2),col8 numeric(10, 2),col9 float, col10 double,col11 real,col12 bool, col13 boolean,col14 DATE,col15 DATETIME,
col16 TIMESTAMP,col17 TIME,col18 YEAR,col19 CHAR(10),col20 VARCHAR(20), col21 BINARY(10),col22 VARBINARY(50), col31 bit,
col32 enum('春', '夏', '秋', '冬', 'unknow'),col33 SET('A', 'B', 'C'),col35 number,col36 VARCHAR2(100),col37 PLS_INTEGER);
create or replace type var_test1_table as table of var_test1;
select * from table( var_test1_table(var_test1(1,11,111,1111,1111,111111,1.23,1.45,1.67,1.89,1.91,1.43,1,1, '2003-01-02','2003-01-02 10:11:12','2003-01-02 10:11:12','10:11:12',2023,'aaa','bbbb','6161','626262',1,'春',  'B', 12.34,'cccddd', 20))) t1 join table( var_test1_table(var_test1(1,11,111,1111,1111,111111,1.23,1.45,1.67,1.89,1.91,1.43,1,1, '2003-01-02','2003-01-02 10:11:12','2003-01-02 10:11:12','10:11:12',2023,'aaa','bbbb','6161','626262',1,'春',  'B', 12.34,'cccddd', 20))) t2 using(col32);
col32	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37
春	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20
select * from table( var_test1_table(var_test1(1,11,111,1111,1111,111111,1.23,1.45,1.67,1.89,1.91,1.43,1,1, '2003-01-02','2003-01-02 10:11:12','2003-01-02 10:11:12','10:11:12',2023,'aaa','bbbb','6161','626262',1,'春',  'B', 12.34,'cccddd', 20))) t1 join table( var_test1_table(var_test1(1,11,111,1111,1111,111111,1.23,1.45,1.67,1.89,1.91,1.43,1,1, '2003-01-02','2003-01-02 10:11:12','2003-01-02 10:11:12','10:11:12',2023,'aaa','bbbb','6161','626262',1,'春',  'B', 12.34,'cccddd', 20))) t2 using(col32);
col32	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37
春	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20
select * from table( var_test1_table(var_test1(1,11,111,1111,1111,111111,1.23,1.45,1.67,1.89,1.91,1.43,1,1, '2003-01-02','2003-01-02 10:11:12','2003-01-02 10:11:12','10:11:12',2023,'aaa','bbbb','6161','626262',1,'春',  'B', 12.34,'cccddd', 20))) t1 join table( var_test1_table(var_test1(1,11,111,1111,1111,111111,1.23,1.45,1.67,1.89,1.91,1.43,1,1, '2003-01-02','2003-01-02 10:11:12','2003-01-02 10:11:12','10:11:12',2023,'aaa','bbbb','6161','626262',1,'春',  'B', 12.34,'cccddd', 20))) t2 using(col32);
col32	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37
春	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20
CREATE or replace PROCEDURE p1() as
begin
for i in 1 .. 10 loop
select * from table( var_test1_table(var_test1(1,11,111,1111,1111,111111,1.23,1.45,1.67,1.89,1.91,1.43,1,1, '2003-01-02','2003-01-02 10:11:12','2003-01-02 10:11:12','10:11:12',2023,'aaa','bbbb','6161','626262',1,'春',  'B', 12.34,'cccddd', 20))) t1 join table( var_test1_table(var_test1(1,11,111,1111,1111,111111,1.23,1.45,1.67,1.89,1.91,1.43,1,1, '2003-01-02','2003-01-02 10:11:12','2003-01-02 10:11:12','10:11:12',2023,'aaa','bbbb','6161','626262',1,'春',  'B', 12.34,'cccddd', 20))) t2 using(col32);
end loop;
end;$$
call p1;
col32	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37
春	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20
col32	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37
春	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20
col32	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37
春	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20
col32	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37
春	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20
col32	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37
春	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20
col32	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37
春	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20
col32	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37
春	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20
col32	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37
春	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20
col32	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37
春	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20
col32	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37	col0	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col19	col20	col21	col22	col31	col33	col35	col36	col37
春	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20	1	11	111	1111	1111	111111	1.23	1.45	1.67	1.89	1.91	1.43	1	1	2003-01-02	2003-01-02 10:11:12	2003-01-02 10:11:12	10:11:12	2023	aaa	bbbb	6161      	626262		B	12.34	cccddd	20
drop PROCEDURE p1;
drop type var_test1_table;
drop type var_test1;
