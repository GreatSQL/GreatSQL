DROP TABLE IF EXISTS `test1`;
Warnings:
Note	1051	Unknown table 'test.test1'
CREATE TABLE `test1` (
`id` int NOT NULL,
`name` varchar(100) DEFAULT NULL,
`test_dec` decimal(10,5) DEFAULT NULL,
`test_blob` blob,
`c5` varchar(255) NOT NULL,
`c6` timestamp NULL DEFAULT NULL,
`c7` char(255) DEFAULT NULL,
`c8` varchar(255) DEFAULT NULL,
PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `test1` VALUES (1, '1', 11.32000, NULL, 'c5', NULL, 'c71', NULL);
INSERT INTO `test1` VALUES (2, '2', 22.24500, NULL, '', '2022-03-17 16:08:57', NULL, 'c82');
INSERT INTO `test1` VALUES (3, '3', 3.00000, NULL, '', '2022-03-17 16:04:15', NULL, NULL);
INSERT INTO `test1` VALUES (4, '3', NULL, NULL, '', NULL, NULL, NULL);
INSERT INTO `test1` VALUES (5, '', NULL, NULL, '', '2022-03-09 16:04:19', NULL, NULL);
INSERT INTO `test1` VALUES (6, '', NULL, NULL, '', NULL, NULL, '1');
INSERT INTO `test1` VALUES (7, '20', NULL, NULL, '', NULL, NULL, NULL);
INSERT INTO `test1` VALUES (8, '8', NULL, NULL, '', NULL, NULL, NULL);
INSERT INTO `test1` VALUES (9, NULL, NULL, NULL, '', NULL, NULL, NULL);
INSERT INTO `test1` VALUES (10, NULL, NULL, NULL, 'c510', NULL, '', '');
DROP TABLE IF EXISTS `test2`;
Warnings:
Note	1051	Unknown table 'test.test2'
CREATE TABLE `test2` (
`id` int NOT NULL,
`name` varchar(100) DEFAULT NULL,
`test_dec` decimal(10,5) DEFAULT NULL,
`test_blob` blob,
`c5` varchar(255) NOT NULL,
`c6` timestamp NULL DEFAULT NULL,
`c7` char(255) DEFAULT NULL,
`c8` varchar(255) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
INSERT INTO `test2` VALUES (10, '1', 11.32000, NULL, 'c5', NULL, 'c71', NULL);
INSERT INTO `test2` VALUES (10, '2', 22.24500, NULL, '', '2022-03-17 16:08:57', NULL, 'c82');
INSERT INTO `test2` VALUES (10, '3', 3.00000, NULL, '', '2022-03-17 16:04:15', NULL, NULL);
INSERT INTO `test2` VALUES (10, '3', NULL, NULL, '', NULL, NULL, NULL);
INSERT INTO `test2` VALUES (20, '', NULL, NULL, '', '2022-03-09 16:04:19', NULL, NULL);
INSERT INTO `test2` VALUES (20, '', NULL, NULL, '', NULL, NULL, '1');
INSERT INTO `test2` VALUES (20, '20', NULL, NULL, '', NULL, NULL, NULL);
INSERT INTO `test2` VALUES (30, '8', NULL, NULL, '', NULL, NULL, NULL);
INSERT INTO `test2` VALUES (30, NULL, NULL, NULL, '', NULL, NULL, NULL);
INSERT INTO `test2` VALUES (40, NULL, NULL, NULL, 'c510', NULL, '', '');
INSERT INTO `test2` VALUES (40, NULL, NULL, NULL, 'c510', NULL, '', '');
INSERT INTO `test2` VALUES (50, '', NULL, NULL, '', NULL, NULL, '1');
INSERT INTO `test2` VALUES (50, '', NULL, NULL, '', NULL, NULL, '1');
CREATE VIEW test_view as select name from test1 group by name;
CREATE TABLE t1 (i1 int, c2 varchar(100) default '', descr VARCHAR(100));
INSERT INTO t1 VALUES (1, '', 'empty string');
INSERT INTO t1 VALUES (-1, NULL, 'null');
INSERT INTO t1 VALUES (2, '', 'empty string 2');
INSERT INTO t1 VALUES (-2, NULL, 'null 2');
CREATE TABLE t2 AS SELECT * FROM t1;
CREATE INDEX t1_c2 ON t1(c2);
create table lob1 (
id int,
c2 clob,
b3 blob
);
insert into lob1 values (0, NULL, NULL);
insert into lob1 values (1, '', '');
insert into lob1 values (2, 'a', 'a');
insert into lob1 values (3, '', '');
insert into lob1 values (4, 'b', 'b');
create table es1 (
id int,
e2 enum('N', 'Y'),
s3 set(' ', 'a', 'b'),
vc4 varchar(100)
);
insert into es1 values (0, null, null, null);
insert into es1 values (100, null, 0, null);
insert into es1 values (2, 'Y', 'a', null);
insert into es1 values (103, 'N', 0, null);
update es1 set vc4=s3;
set timestamp=1648915200;
set @default_mode='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';
set @default_mode_emptystring_equal_null='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION,emptystring_equal_null';
set @oracle_mode='oracle';
set @oracle_mode_emptystring_equal_null='oracle,emptystring_equal_null';
set sql_mode=default;
test ------------------------no emptystring_equal_null mode;--------------------------------
test Numerical function
select name,abs(name) from test1;
name	abs(name)
1	1
2	2
3	3
3	3
	0
	0
20	20
8	8
NULL	NULL
NULL	NULL
select name,SQRT(name) from test1;
name	SQRT(name)
1	1
2	1.4142135623730951
3	1.7320508075688772
3	1.7320508075688772
	0
	0
20	4.47213595499958
8	2.8284271247461903
NULL	NULL
NULL	NULL
select name,MOD(name,1.5) from test1;
name	MOD(name,1.5)
1	1
2	0.5
3	0
3	0
	0
	0
20	0.5
8	0.5
NULL	NULL
NULL	NULL
select name,CEIL(name) from test1;
name	CEIL(name)
1	1
2	2
3	3
3	3
	0
	0
20	20
8	8
NULL	NULL
NULL	NULL
select name,CEILING(name) from test1;
name	CEILING(name)
1	1
2	2
3	3
3	3
	0
	0
20	20
8	8
NULL	NULL
NULL	NULL
select name,FLOOR(name) from test1;
name	FLOOR(name)
1	1
2	2
3	3
3	3
	0
	0
20	20
8	8
NULL	NULL
NULL	NULL
select name,RAND(name) from test1;
name	RAND(name)
1	0.40540353712197724
2	0.6555866465490187
3	0.9057697559760601
3	0.9057697559760601
	0.15522042769493574
	0.15522042769493574
20	0.15888261251047497
8	0.15668530311126755
NULL	0.15522042769493574
NULL	0.15522042769493574
select name,ROUND(name) from test1;
name	ROUND(name)
1	1
2	2
3	3
3	3
	0
	0
20	20
8	8
NULL	NULL
NULL	NULL
select name,SIGN(name) from test1;
name	SIGN(name)
1	1
2	1
3	1
3	1
	0
	0
20	1
8	1
NULL	NULL
NULL	NULL
select name,POW(name,2) from test1;
name	POW(name,2)
1	1
2	4
3	9
3	9
	0
	0
20	400
8	64
NULL	NULL
NULL	NULL
select name,POWER(name,2) from test1;
name	POWER(name,2)
1	1
2	4
3	9
3	9
	0
	0
20	400
8	64
NULL	NULL
NULL	NULL
select name,SIN(name) from test1;
name	SIN(name)
1	0.8414709848078965
2	0.9092974268256817
3	0.1411200080598672
3	0.1411200080598672
	0
	0
20	0.9129452507276277
8	0.9893582466233818
NULL	NULL
NULL	NULL
select name,ASIN(name) from test1;
name	ASIN(name)
1	1.5707963267948966
2	NULL
3	NULL
3	NULL
	0
	0
20	NULL
8	NULL
NULL	NULL
NULL	NULL
select name,COS(name) from test1;
name	COS(name)
1	0.5403023058681398
2	-0.4161468365471424
3	-0.9899924966004454
3	-0.9899924966004454
	1
	1
20	0.40808206181339196
8	-0.14550003380861354
NULL	NULL
NULL	NULL
select name,ACOS(name) from test1;
name	ACOS(name)
1	0
2	NULL
3	NULL
3	NULL
	1.5707963267948966
	1.5707963267948966
20	NULL
8	NULL
NULL	NULL
NULL	NULL
select name,TAN(name) from test1;
name	TAN(name)
1	<0>
2	<0>
3	<0>
3	<0>
	<0>
	<0>
20	<0>
8	<0>
NULL	<0>
NULL	<0>
select name,ATAN(name) from test1;
name	ATAN(name)
1	<0>
2	<0>
3	<0>
3	<0>
	<0>
	<0>
20	<0>
8	<0>
NULL	<0>
NULL	<0>
select name,COT(name) from test1;
ERROR 22003: DOUBLE value is out of range in 'cot(`test`.`test1`.`name`)'
test string function
select name,length(name) from test1;
name	length(name)
1	1
2	1
3	1
3	1
	0
	0
20	2
8	1
NULL	NULL
NULL	NULL
select name,CONCAT(name) from test1;
name	CONCAT(name)
1	1
2	2
3	3
3	3
	
	
20	20
8	8
NULL	NULL
NULL	NULL
select name,CONCAT(name,'2') from test1;
name	CONCAT(name,'2')
1	12
2	22
3	32
3	32
	2
	2
20	202
8	82
NULL	NULL
NULL	NULL
select name,concat(name,'') from test1;
name	concat(name,'')
1	1
2	2
3	3
3	3
	
	
20	20
8	8
NULL	NULL
NULL	NULL
select concat('a','') from dual;
concat('a','')
a
select name,INSERT(name,1,1,'+') from test1;
name	INSERT(name,1,1,'+')
1	+
2	+
3	+
3	+
	
	
20	+0
8	+
NULL	NULL
NULL	NULL
select name,LOWER(name) from test1;
name	LOWER(name)
1	1
2	2
3	3
3	3
	
	
20	20
8	8
NULL	NULL
NULL	NULL
select name,UPPER(name) from test1;
name	UPPER(name)
1	1
2	2
3	3
3	3
	
	
20	20
8	8
NULL	NULL
NULL	NULL
select name,LEFT(name,1) from test1;
name	LEFT(name,1)
1	1
2	2
3	3
3	3
	
	
20	2
8	8
NULL	NULL
NULL	NULL
select name,RIGHT(name,1) from test1;
name	RIGHT(name,1)
1	1
2	2
3	3
3	3
	
	
20	0
8	8
NULL	NULL
NULL	NULL
select name,TRIM(name) from test1;
name	TRIM(name)
1	1
2	2
3	3
3	3
	
	
20	20
8	8
NULL	NULL
NULL	NULL
select name,REPLACE(name,name,'') from test1;
name	REPLACE(name,name,'')
1	
2	
3	
3	
	
	
20	
8	
NULL	NULL
NULL	NULL
select name,SUBSTRING(name,2) from test1;
name	SUBSTRING(name,2)
1	
2	
3	
3	
	
	
20	0
8	
NULL	NULL
NULL	NULL
select name,REVERSE(name) from test1;
name	REVERSE(name)
1	1
2	2
3	3
3	3
	
	
20	02
8	8
NULL	NULL
NULL	NULL
select space('') from dual;
space('')

test date time funciton
select str_to_date(name, '%m/%d/%Y') from test1;
str_to_date(name, '%m/%d/%Y')
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select date_format(name, '%Y%m%d%H%i%s') from test1;
date_format(name, '%Y%m%d%H%i%s')
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select time_to_sec(name) from test1;
time_to_sec(name)
1
2
3
3
NULL
NULL
20
8
NULL
NULL
select sec_to_time(name) from test1;
sec_to_time(name)
00:00:01.000000
00:00:02.000000
00:00:03.000000
00:00:03.000000
00:00:00.000000
00:00:00.000000
00:00:20.000000
00:00:08.000000
NULL
NULL
select makedate(name,31) from test1;
makedate(name,31)
2001-01-31
2002-01-31
2003-01-31
2003-01-31
2000-01-31
2000-01-31
2020-01-31
2008-01-31
NULL
NULL
select maketime(name,15,31) from test1;
maketime(name,15,31)
01:15:31
02:15:31
03:15:31
03:15:31
00:15:31
00:15:31
20:15:31
08:15:31
NULL
NULL
select unix_timestamp(name) from test1;
unix_timestamp(name)
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000
NULL
NULL
select from_unixtime(name) from test1;
from_unixtime(name)
1970-01-01 03:00:01.000000
1970-01-01 03:00:02.000000
1970-01-01 03:00:03.000000
1970-01-01 03:00:03.000000
1970-01-01 03:00:00.000000
1970-01-01 03:00:00.000000
1970-01-01 03:00:20.000000
1970-01-01 03:00:08.000000
NULL
NULL
select timestamp(name) from test1;
timestamp(name)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
set @dt ='';
select date_add(@dt, interval 1 day);
date_add(@dt, interval 1 day)
NULL
select convert_tz(name, '+08:00', '+00:00') from test1;
convert_tz(name, '+08:00', '+00:00')
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select date_sub(name, interval 1 day) from test1;
date_sub(name, interval 1 day)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select timestampadd(hour, -8, name) from test1;
timestampadd(hour, -8, name)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
test oracle mode ||
set sql_mode=oracle;
select concat('a',null) from dual;
concat('a',null)
NULL
select concat('a','') from dual;
concat('a','')
a
select 'a'||null from dual;
'a'||null 
a
select 'a'||'' from dual;
'a'||''
a
set sql_mode=default;
test statistical function
select MAX(name) from test1;
MAX(name)
8
select MIN(name) from test1;
MIN(name)

select COUNT(name) from test1;
COUNT(name)
8
select sum(name) from test1;
sum(name)
37
select AVG(name) from test1;
AVG(name)
4.625
select least(c5,name) from test1 ;
least(c5,name)
1







NULL
NULL
test CAST
select CAST(name AS decimal) from test1;
CAST(name AS decimal)
1
2
3
3
0
0
20
8
NULL
NULL
select to_date(name,'yyyy') from test1;
to_date(name,'yyyy')
0001-04-01 00:00:00
0002-04-01 00:00:00
0003-04-01 00:00:00
0003-04-01 00:00:00
NULL
NULL
0020-04-01 00:00:00
0008-04-01 00:00:00
NULL
NULL
select CAST(name AS date) from test1;
CAST(name AS date)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select CAST(name AS time) from test1;
CAST(name AS time)
00:00:01
00:00:02
00:00:03
00:00:03
NULL
NULL
00:00:20
00:00:08
NULL
NULL
select CAST(name as binary) from test1;
CAST(name as binary)
1
2
3
3


20
8
NULL
NULL
select CAST(name as json) from test1;
ERROR 22032: Invalid JSON text in argument 1 to function cast_as_json: "The document is empty." at position 0.
test CONVERT
SELECT CONVERT(name , decimal) from test1;
CONVERT(name , decimal)
1
2
3
3
0
0
20
8
NULL
NULL
test IF ,IFNULL
select name,IF(name>0,'Y','N') from test1;
name	IF(name>0,'Y','N')
1	Y
2	Y
3	Y
3	Y
	N
	N
20	Y
8	Y
NULL	N
NULL	N
select name,IFNULL(name,'Y') from test1;
name	IFNULL(name,'Y')
1	1
2	2
3	3
3	3
	
	
20	20
8	8
NULL	Y
NULL	Y
select nullif(null,'') from dual;
nullif(null,'')
NULL
select nvl('',6) from dual;
nvl('',6)

select nvl(name,6) from test1;
nvl(name,6)
1
2
3
3


20
8
6
6
select '' is  null from dual;
'' is  null
0
select '' is not  null from dual;
'' is not  null
1
select ''  from dual;


select name is null from test1;
name is null
0
0
0
0
0
0
0
0
1
1
select name is not null from test1;
name is not null
1
1
1
1
1
1
1
1
0
0
test CASE WHEN THEN
SELECT CASE name WHEN -2 THEN 'name<0' WHEN 2 THEN 'name>0' ELSE 'other' END AS name from test1;
name
other
name>0
other
other
other
other
other
other
other
other
test UNION
select name from test1 union select c5 from test1;
name
1
2
3

20
8
NULL
c5
c510
test DISTINCT
select distinct name ,c5 from test1;
name	c5
1	c5
2	
3	
	
20	
8	
NULL	
NULL	c510
select distinct name,count(name),count(''),count(*) from test1 group by name;
name	count(name)	count('')	count(*)
1	1	1	1
2	1	1	1
3	2	2	2
	2	2	2
20	1	1	1
8	1	1	1
NULL	0	2	2
test JOIN
select * from test1 t  join test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL	1	1	11.32000	NULL	c5	NULL	c71	NULL
2	2	22.24500	NULL		2022-03-17 16:08:57	NULL	c82	2	2	22.24500	NULL		2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL		NULL	NULL	NULL	3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL
3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL	3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL		NULL	NULL	NULL	4	3	NULL	NULL		NULL	NULL	NULL
3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL		NULL	NULL	NULL
6		NULL	NULL		NULL	NULL	1	5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL	5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
6		NULL	NULL		NULL	NULL	1	6		NULL	NULL		NULL	NULL	1
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL	6		NULL	NULL		NULL	NULL	1
7	20	NULL	NULL		NULL	NULL	NULL	7	20	NULL	NULL		NULL	NULL	NULL
8	8	NULL	NULL		NULL	NULL	NULL	8	8	NULL	NULL		NULL	NULL	NULL
select * from test1 t  inner join test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL	1	1	11.32000	NULL	c5	NULL	c71	NULL
2	2	22.24500	NULL		2022-03-17 16:08:57	NULL	c82	2	2	22.24500	NULL		2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL		NULL	NULL	NULL	3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL
3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL	3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL		NULL	NULL	NULL	4	3	NULL	NULL		NULL	NULL	NULL
3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL		NULL	NULL	NULL
6		NULL	NULL		NULL	NULL	1	5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL	5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
6		NULL	NULL		NULL	NULL	1	6		NULL	NULL		NULL	NULL	1
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL	6		NULL	NULL		NULL	NULL	1
7	20	NULL	NULL		NULL	NULL	NULL	7	20	NULL	NULL		NULL	NULL	NULL
8	8	NULL	NULL		NULL	NULL	NULL	8	8	NULL	NULL		NULL	NULL	NULL
select * from test1 t  cross join test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL	1	1	11.32000	NULL	c5	NULL	c71	NULL
2	2	22.24500	NULL		2022-03-17 16:08:57	NULL	c82	2	2	22.24500	NULL		2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL		NULL	NULL	NULL	3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL
3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL	3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL		NULL	NULL	NULL	4	3	NULL	NULL		NULL	NULL	NULL
3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL		NULL	NULL	NULL
6		NULL	NULL		NULL	NULL	1	5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL	5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
6		NULL	NULL		NULL	NULL	1	6		NULL	NULL		NULL	NULL	1
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL	6		NULL	NULL		NULL	NULL	1
7	20	NULL	NULL		NULL	NULL	NULL	7	20	NULL	NULL		NULL	NULL	NULL
8	8	NULL	NULL		NULL	NULL	NULL	8	8	NULL	NULL		NULL	NULL	NULL
select * from test1 t  straight_join test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL	1	1	11.32000	NULL	c5	NULL	c71	NULL
2	2	22.24500	NULL		2022-03-17 16:08:57	NULL	c82	2	2	22.24500	NULL		2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL		NULL	NULL	NULL	3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL
3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL	3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL		NULL	NULL	NULL	4	3	NULL	NULL		NULL	NULL	NULL
3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL		NULL	NULL	NULL
6		NULL	NULL		NULL	NULL	1	5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL	5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
6		NULL	NULL		NULL	NULL	1	6		NULL	NULL		NULL	NULL	1
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL	6		NULL	NULL		NULL	NULL	1
7	20	NULL	NULL		NULL	NULL	NULL	7	20	NULL	NULL		NULL	NULL	NULL
8	8	NULL	NULL		NULL	NULL	NULL	8	8	NULL	NULL		NULL	NULL	NULL
select * from test1 t left join  test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL	1	1	11.32000	NULL	c5	NULL	c71	NULL
2	2	22.24500	NULL		2022-03-17 16:08:57	NULL	c82	2	2	22.24500	NULL		2022-03-17 16:08:57	NULL	c82
3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL		NULL	NULL	NULL
3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL	3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL		NULL	NULL	NULL	4	3	NULL	NULL		NULL	NULL	NULL
4	3	NULL	NULL		NULL	NULL	NULL	3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL	6		NULL	NULL		NULL	NULL	1
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL	5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
6		NULL	NULL		NULL	NULL	1	6		NULL	NULL		NULL	NULL	1
6		NULL	NULL		NULL	NULL	1	5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
7	20	NULL	NULL		NULL	NULL	NULL	7	20	NULL	NULL		NULL	NULL	NULL
8	8	NULL	NULL		NULL	NULL	NULL	8	8	NULL	NULL		NULL	NULL	NULL
9	NULL	NULL	NULL		NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
10	NULL	NULL	NULL	c510	NULL			NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
select * from test1 t right join  test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL	1	1	11.32000	NULL	c5	NULL	c71	NULL
2	2	22.24500	NULL		2022-03-17 16:08:57	NULL	c82	2	2	22.24500	NULL		2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL		NULL	NULL	NULL	3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL
3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL	3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL		NULL	NULL	NULL	4	3	NULL	NULL		NULL	NULL	NULL
3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL		NULL	NULL	NULL
6		NULL	NULL		NULL	NULL	1	5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL	5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
6		NULL	NULL		NULL	NULL	1	6		NULL	NULL		NULL	NULL	1
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL	6		NULL	NULL		NULL	NULL	1
7	20	NULL	NULL		NULL	NULL	NULL	7	20	NULL	NULL		NULL	NULL	NULL
8	8	NULL	NULL		NULL	NULL	NULL	8	8	NULL	NULL		NULL	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	9	NULL	NULL	NULL		NULL	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	10	NULL	NULL	NULL	c510	NULL		
test INSERT INTO
insert into test1 select * from test1;
ERROR 23000: Duplicate entry '1' for key 'test1.PRIMARY'
test IN
select name from test1 where name not in (1,2,3);
name


20
8
select name from test1 where name  in (1,2,3);
name
1
2
3
3
test replace
replace into test1(id,name,test_dec,test_blob,c5,c6) values(8, '', NULL, NULL, '', NULL);
test SUBQUERY
SELECT * FROM test1 WHERE name = (SELECT name FROM test1 where id=5);
id	name	test_dec	test_blob	c5	c6	c7	c8
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
6		NULL	NULL		NULL	NULL	1
8		NULL	NULL		NULL	NULL	NULL
test where
select name from test1 where name > '';
name
1
2
3
3
20
select name from test1 where name = '';
name



test not null field c5 in where
select * from test1 where c5 is null;
id	name	test_dec	test_blob	c5	c6	c7	c8
select * from test1 where c5 is not null;
id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL
2	2	22.24500	NULL		2022-03-17 16:08:57	NULL	c82
3	3	3.00000	NULL		2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL		NULL	NULL	NULL
5		NULL	NULL		2022-03-09 16:04:19	NULL	NULL
6		NULL	NULL		NULL	NULL	1
7	20	NULL	NULL		NULL	NULL	NULL
8		NULL	NULL		NULL	NULL	NULL
9	NULL	NULL	NULL		NULL	NULL	NULL
10	NULL	NULL	NULL	c510	NULL		
test not null field c5 in update insert op
set sql_mode='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,ORACLE,STRICT_ALL_TABLES';
DROP PROCEDURE IF EXISTS test_oracle_cursor_loop;
CREATE PROCEDURE test_oracle_cursor_loop() as
cursor c is select id,c5 from test1 ; 
BEGIN
for rec in  c loop
update test1 set c5=rec.c5 where id=rec.id;
select rec.id,rec.c5;
END LOOP;
END//
call test_oracle_cursor_loop;
rec.id	rec.c5
1	c5
rec.id	rec.c5
2	
rec.id	rec.c5
3	
rec.id	rec.c5
4	
rec.id	rec.c5
5	
rec.id	rec.c5
6	
rec.id	rec.c5
7	
rec.id	rec.c5
8	
rec.id	rec.c5
9	
rec.id	rec.c5
10	c510
set sql_mode=default;
update test1 set c5='' where id=4;
INSERT INTO `test1` VALUES (11, '', NULL, NULL, '', NULL, NULL, NULL);
test oracmp function
select add_months('2021-2-28',name) from test1;
add_months('2021-2-28',name)
2021-03-31 00:00:00
2021-04-30 00:00:00
2021-05-31 00:00:00
2021-05-31 00:00:00
NULL
NULL
2022-10-31 00:00:00
NULL
NULL
NULL
NULL
select trunc(name) from test1;
trunc(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select chr(name) from test1;
chr(name)




 
 

 
NULL
NULL
 
select name,decode(name, '',1,2),decode(name,null,1,2) from test1;
name	decode(name, '',1,2)	decode(name,null,1,2)
1	2	2
2	2	2
3	2	2
3	2	2
	1	2
	1	2
20	2	2
	1	2
NULL	2	1
NULL	2	1
	1	2
select name,c5,decode(name, c5, 'one', 2, 'two', 'other') from test1;
name	c5	decode(name, c5, 'one', 2, 'two', 'other')
1	c5	other
2		two
3		other
3		other
		one
		one
20		other
		one
NULL		other
NULL	c510	other
		one
select name,dump(name) from test1;
name	dump(name)
1	Type=15 Len=3:1,0,49
2	Type=15 Len=3:1,0,50
3	Type=15 Len=3:1,0,51
3	Type=15 Len=3:1,0,51
	NULL
	NULL
20	Type=15 Len=4:2,0,50,48
	NULL
NULL	NULL
NULL	NULL
	NULL
select name,instr(name,'1') from test1;
name	instr(name,'1')
1	1
2	0
3	0
3	0
	0
	0
20	0
	0
NULL	NULL
NULL	NULL
	0
select name,instrb(name,'1') from test1;
name	instrb(name,'1')
1	1
2	0
3	0
3	0
	NULL
	NULL
20	0
	NULL
NULL	NULL
NULL	NULL
	NULL
select name,length(name) from test1;
name	length(name)
1	1
2	1
3	1
3	1
	0
	0
20	2
	0
NULL	NULL
NULL	NULL
	0
select name,lengthb(name) from test1;
name	lengthb(name)
1	1
2	1
3	1
3	1
	NULL
	NULL
20	2
	NULL
NULL	NULL
NULL	NULL
	NULL
explain select name,decode(name, '', 1, 2) from test1;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test1	NULL	ALL	NULL	NULL	NULL	NULL	11	100.00	NULL
show warnings;
Level	Code	Message
Note	1003	/* select#1 */ select `test`.`test1`.`name` AS `name`,decode(`test`.`test1`.`name`,'',1,2) AS `decode(name, '', 1, 2)` from `test`.`test1`
explain select group_concat(name order by id ASC) gc,name from test1 group by name;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test1	NULL	ALL	NULL	NULL	NULL	NULL	11	100.00	Using filesort
show  warnings;
Level	Code	Message
Note	1003	/* select#1 */ select group_concat(`test`.`test1`.`name` order by `test`.`test1`.`id` ASC separator ',') AS `gc`,`test`.`test1`.`name` AS `name` from `test`.`test1` group by `test`.`test1`.`name`
select group_concat(name order by id ASC) gc,name from test1 group by name;
gc	name
NULL	NULL
,,,	
1	1
2	2
20	20
3,3	3
explain  select listagg(name,';') within group (order by id ASC  ) AS TOAL,name from test1 group by name ;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test1	NULL	ALL	NULL	NULL	NULL	NULL	11	100.00	Using filesort
show  warnings;
Level	Code	Message
Note	1003	/* select#1 */ select listagg(`test`.`test1`.`name` , ';') within group (order by `test`.`test1`.`id` ASC) AS `TOAL`,`test`.`test1`.`name` AS `name` from `test`.`test1` group by `test`.`test1`.`name`
select listagg(name,';') within group (order by id ASC  ) AS TOAL,name from test1 group by name ;
TOAL	name
NULL	NULL
NULL	
1	1
2	2
20	20
3;3	3
select name,rpad_oracle(name,'1'),lpad_oracle(name,'1') from test1;
name	rpad_oracle(name,'1')	lpad_oracle(name,'1')
1	1	1
2	2	2
3	3	3
3	3	3
	 	 
	 	 
20	2	2
	 	 
NULL	NULL	NULL
NULL	NULL	NULL
	 	 
select name,rpad_oracle(name,5,'a'),lpad_oracle(name,0,'a') from test1;
name	rpad_oracle(name,5,'a')	lpad_oracle(name,0,'a')
1	1aaaa	NULL
2	2aaaa	NULL
3	3aaaa	NULL
3	3aaaa	NULL
	aaaaa	NULL
	aaaaa	NULL
20	20aaa	NULL
	aaaaa	NULL
NULL	NULL	NULL
NULL	NULL	NULL
	aaaaa	NULL
select REGEXP_COUNT(name,'1',1,'c') from test1 ;
REGEXP_COUNT(name,'1',1,'c')
1
0
0
0
NULL
NULL
0
NULL
NULL
NULL
NULL
select REGEXP_COUNT(id, name,1,'c') from test1 ;
REGEXP_COUNT(id, name,1,'c')
1
1
1
0
NULL
NULL
0
NULL
NULL
NULL
NULL
select trim(name) from test1;
trim(name)
1
2
3
3


20

NULL
NULL

select ltrim(name) from test1;
ltrim(name)
1
2
3
3


20

NULL
NULL

select rtrim(name) from test1;
rtrim(name)
1
2
3
3


20

NULL
NULL

select substr(name, -90, 7) from test1;
substr(name, -90, 7)








NULL
NULL

select substrb(name, -90, 7) from test1;
substrb(name, -90, 7)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select to_char(name) from test1;
to_char(name)
1
2
3
3


20

NULL
NULL

select to_date(name,'yyyy') from test1;
to_date(name,'yyyy')
0001-04-01 00:00:00
0002-04-01 00:00:00
0003-04-01 00:00:00
0003-04-01 00:00:00
NULL
NULL
0020-04-01 00:00:00
NULL
NULL
NULL
NULL
select to_number(name,'9999') from test1;
to_number(name,'9999')
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select to_number(name,'99.009') from test1;
to_number(name,'99.009')
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select to_number(name) from test1;
to_number(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select to_timestamp(name,'yy') from test1;
to_timestamp(name,'yy')
2001-04-01 00:00:00.000000
2002-04-01 00:00:00.000000
2003-04-01 00:00:00.000000
2003-04-01 00:00:00.000000
NULL
NULL
2020-04-01 00:00:00.000000
NULL
NULL
NULL
NULL
select translate(name,'','null') from test1;
translate(name,'','null')
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select translate(name,'1','=1') from test1;
translate(name,'1','=1')
=
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select trunc(name) from test1;
trunc(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select vsize(name) from test1;
vsize(name)
3
3
3
3
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select group_concat(name) from test1;
group_concat(name)
1,2,3,3,,,20,,
explain select wm_concat(name) from test1;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test1	NULL	ALL	NULL	NULL	NULL	NULL	11	100.00	NULL
show  warnings;
Level	Code	Message
Note	1003	/* select#1 */ select wm_concat(`test`.`test1`.`name` separator ',') AS `wm_concat(name)` from `test`.`test1`
select wm_concat(name) from test1;
wm_concat(name)
1,2,3,3,20
test group by 
select name from test1 group by name ;
name
1
2
3

20
NULL
select name,c8 from test1 group by name,c8 ;
name	c8
1	NULL
2	c82
3	NULL
	NULL
	1
20	NULL
NULL	NULL
NULL	
select b.name from  (select * from test1) b left join test1 c on b.name=c.name group by b.name;
name
1
2
3

20
NULL
select name from (select * from test1 where id>3) b union select name from test1 group by name;
name
3

20
NULL
1
2
select * from test_view;
name
1
2
3

20
NULL
select c1,ca from (select name c1,  '' ca from test1 group by name) where ca is null;
c1	ca
test in and not in 
select name from test1 where name not in (1,2,'');
name
3
3
20
select name from test1 where name  in (1,2,null);
name
1
2
test set variable
set @a='';
select @a,name from test1 where name > @a;
@a	name
	1
	2
	3
	3
	20
select @a,name from test1 where @a is null;
@a	name
test table index field
select * from t1 where c2 is null;
i1	c2	descr
-1	NULL	null
-2	NULL	null 2
select * from t2 where c2 is null;
i1	c2	descr
-1	NULL	null
-2	NULL	null 2
select * from t1 where c2 is not null;
i1	c2	descr
1		empty string
2		empty string 2
select * from t2 where c2 is not null;
i1	c2	descr
1		empty string
2		empty string 2
select i1,c2,descr "off, t1.c2=" from t1 where i1 > -99 and c2='';
i1	c2	off, t1.c2=
1		empty string
2		empty string 2
select i1,c2,descr 'off, t2.c2=' from t2 where i1 > -99 and c2='';
i1	c2	off, t2.c2=
1		empty string
2		empty string 2
select i1,c2,descr 'off, t1.c2 is null' from t1 where i1 > -99 and c2 is null;
i1	c2	off, t1.c2 is null
-1	NULL	null
-2	NULL	null 2
select i1,c2,descr 'off, t2.c2 is null' from t2 where i1 > -99 and c2 is null;
i1	c2	off, t2.c2 is null
-1	NULL	null
-2	NULL	null 2
# test lob
select *,'esn=off' from lob1;
id	c2	b3	esn=off
0	NULL	NULL	esn=off
1			esn=off
2	a	a	esn=off
3			esn=off
4	b	b	esn=off
select listagg(c2,','),group_concat(c2) ,'esn=off' from lob1;
listagg(c2,',')	group_concat(c2)	esn=off
a,b	,a,,b	esn=off
# test enum/set
select *,s3+0,null+0,'esn=off' from es1;
id	e2	s3	vc4	s3+0	null+0	esn=off
0	NULL	NULL	NULL	NULL	NULL	esn=off
100	NULL			0	NULL	esn=off
2	Y	a	a	2	NULL	esn=off
103	N			0	NULL	esn=off
select listagg(s3,','),group_concat(s3),'esn=off' from es1;
listagg(s3,',')	group_concat(s3)	esn=off
a	,a,	esn=off
test emptystring_equal_null change between prepare/execute.
set sql_mode=@default_mode;
prepare stmt1 from 'select c2,isnull(c2),''p-off,e-on'' from t1 where c2 is null ';
set sql_mode=@default_mode_emptystring_equal_null;
execute stmt1;
c2	isnull(c2)	p-off,e-on
NULL	1	p-off,e-on
NULL	1	p-off,e-on
NULL	1	p-off,e-on
NULL	1	p-off,e-on
select c2,isnull(c2),'e-on' from t1 where c2 is null;
c2	isnull(c2)	e-on
NULL	1	e-on
NULL	1	e-on
NULL	1	e-on
NULL	1	e-on
deallocate prepare stmt1;
set sql_mode=@default_mode_emptystring_equal_null;
prepare stmt1 from 'select c2,isnull(c2),''p-on,e-off'' from t1 where c2 is null ';
set sql_mode=@default_mode;
execute stmt1;
c2	isnull(c2)	p-on,e-off
NULL	1	p-on,e-off
NULL	1	p-on,e-off
select c2,isnull(c2),'e-off' from t1 where c2 is null;
c2	isnull(c2)	e-off
NULL	1	e-off
NULL	1	e-off
deallocate prepare stmt1;
set sql_mode=@default_mode_emptystring_equal_null;
prepare stmt1 from 'select c2,isnull(c2),''p-on,e-on'' from t1 where c2 is null ';
execute stmt1;
c2	isnull(c2)	p-on,e-on
NULL	1	p-on,e-on
NULL	1	p-on,e-on
NULL	1	p-on,e-on
NULL	1	p-on,e-on
select c2,isnull(c2),'e-on' from t1 where c2 is null;
c2	isnull(c2)	e-on
NULL	1	e-on
NULL	1	e-on
NULL	1	e-on
NULL	1	e-on
deallocate prepare stmt1;
test count/min/max
set sql_mode=@default_mode_emptystring_equal_null;
select count(''),min(''),max(''),count(null),min(null),max(null) from t1;
count('')	min('')	max('')	count(null)	min(null)	max(null)
0	NULL	NULL	0	NULL	NULL
select name,count(name),count(''),count(*) from test1 group by name;
name	count(name)	count('')	count(*)
1	1	0	1
2	1	0	1
3	2	0	2
NULL	0	0	6
20	1	0	1
select '' '';
NULL
NULL
set sql_mode=@default_mode;
select count(''),min(''),max(''),count(null),min(null),max(null) from t1;
count('')	min('')	max('')	count(null)	min(null)	max(null)
4			0	NULL	NULL
select name,count(name),count(''),count(*) from test1 group by name;
name	count(name)	count('')	count(*)
1	1	1	1
2	1	1	1
3	2	2	2
	4	4	4
20	1	1	1
NULL	0	2	2
select '' '';


test ------------------------default mode add emptystring_equal_null mode; ---------------------------------
set sql_mode=@default_mode_emptystring_equal_null;
test Numerical function
select name,abs(name) from test1;
name	abs(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,SQRT(name) from test1;
name	SQRT(name)
1	1
2	1.4142135623730951
3	1.7320508075688772
3	1.7320508075688772
NULL	NULL
NULL	NULL
20	4.47213595499958
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,MOD(name,1.5) from test1;
name	MOD(name,1.5)
1	1
2	0.5
3	0
3	0
NULL	NULL
NULL	NULL
20	0.5
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,CEIL(name) from test1;
name	CEIL(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,CEILING(name) from test1;
name	CEILING(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,FLOOR(name) from test1;
name	FLOOR(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,RAND(name) from test1;
name	RAND(name)
1	0.40540353712197724
2	0.6555866465490187
3	0.9057697559760601
3	0.9057697559760601
NULL	0.15522042769493574
NULL	0.15522042769493574
20	0.15888261251047497
NULL	0.15522042769493574
NULL	0.15522042769493574
NULL	0.15522042769493574
NULL	0.15522042769493574
select name,ROUND(name) from test1;
name	ROUND(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,SIGN(name) from test1;
name	SIGN(name)
1	1
2	1
3	1
3	1
NULL	NULL
NULL	NULL
20	1
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,POW(name,2) from test1;
name	POW(name,2)
1	1
2	4
3	9
3	9
NULL	NULL
NULL	NULL
20	400
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,POWER(name,2) from test1;
name	POWER(name,2)
1	1
2	4
3	9
3	9
NULL	NULL
NULL	NULL
20	400
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,SIN(name) from test1;
name	SIN(name)
1	0.8414709848078965
2	0.9092974268256817
3	0.1411200080598672
3	0.1411200080598672
NULL	NULL
NULL	NULL
20	0.9129452507276277
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,ASIN(name) from test1;
name	ASIN(name)
1	1.5707963267948966
2	NULL
3	NULL
3	NULL
NULL	NULL
NULL	NULL
20	NULL
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,COS(name) from test1;
name	COS(name)
1	0.5403023058681398
2	-0.4161468365471424
3	-0.9899924966004454
3	-0.9899924966004454
NULL	NULL
NULL	NULL
20	0.40808206181339196
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,ACOS(name) from test1;
name	ACOS(name)
1	0
2	NULL
3	NULL
3	NULL
NULL	NULL
NULL	NULL
20	NULL
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,TAN(name) from test1;
name	TAN(name)
1	<0>
2	<0>
3	<0>
3	<0>
NULL	<0>
NULL	<0>
20	<0>
NULL	<0>
NULL	<0>
NULL	<0>
NULL	<0>
select name,ATAN(name) from test1;
name	ATAN(name)
1	<0>
2	<0>
3	<0>
3	<0>
NULL	<0>
NULL	<0>
20	<0>
NULL	<0>
NULL	<0>
NULL	<0>
NULL	<0>
select name,COT(name) from test1;
name	COT(name)
1	<0>
2	<0>
3	<0>
3	<0>
NULL	<0>
NULL	<0>
20	<0>
NULL	<0>
NULL	<0>
NULL	<0>
NULL	<0>
test string function
select name,length(name) from test1;
name	length(name)
1	1
2	1
3	1
3	1
NULL	NULL
NULL	NULL
20	2
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,CONCAT(name) from test1;
name	CONCAT(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,CONCAT(name,'2') from test1;
name	CONCAT(name,'2')
1	12
2	22
3	32
3	32
NULL	NULL
NULL	NULL
20	202
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,concat(name,'') from test1;
name	concat(name,'')
1	NULL
2	NULL
3	NULL
3	NULL
NULL	NULL
NULL	NULL
20	NULL
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select concat('a','') from dual;
concat('a','')
NULL
select name,INSERT(name,1,1,'+') from test1;
name	INSERT(name,1,1,'+')
1	+
2	+
3	+
3	+
NULL	NULL
NULL	NULL
20	+0
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,LOWER(name) from test1;
name	LOWER(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,UPPER(name) from test1;
name	UPPER(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,LEFT(name,1) from test1;
name	LEFT(name,1)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	2
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,RIGHT(name,1) from test1;
name	RIGHT(name,1)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	0
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,TRIM(name) from test1;
name	TRIM(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,REPLACE(name,name,'') from test1;
name	REPLACE(name,name,'')
1	NULL
2	NULL
3	NULL
3	NULL
NULL	NULL
NULL	NULL
20	NULL
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,SUBSTRING(name,2) from test1;
name	SUBSTRING(name,2)
1	
2	
3	
3	
NULL	NULL
NULL	NULL
20	0
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,REVERSE(name) from test1;
name	REVERSE(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	02
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select space('') from dual;
space('')
NULL
test date time funciton
select str_to_date(name, '%m/%d/%Y') from test1;
str_to_date(name, '%m/%d/%Y')
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select date_format(name, '%Y%m%d%H%i%s') from test1;
date_format(name, '%Y%m%d%H%i%s')
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select time_to_sec(name) from test1;
time_to_sec(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select sec_to_time(name) from test1;
sec_to_time(name)
00:00:01.000000
00:00:02.000000
00:00:03.000000
00:00:03.000000
NULL
NULL
00:00:20.000000
NULL
NULL
NULL
NULL
select makedate(name,31) from test1;
makedate(name,31)
2001-01-31
2002-01-31
2003-01-31
2003-01-31
NULL
NULL
2020-01-31
NULL
NULL
NULL
NULL
select maketime(name,15,31) from test1;
maketime(name,15,31)
01:15:31
02:15:31
03:15:31
03:15:31
NULL
NULL
20:15:31
NULL
NULL
NULL
NULL
select unix_timestamp(name) from test1;
unix_timestamp(name)
0.000000
0.000000
0.000000
0.000000
NULL
NULL
0.000000
NULL
NULL
NULL
NULL
select from_unixtime(name) from test1;
from_unixtime(name)
1970-01-01 03:00:01.000000
1970-01-01 03:00:02.000000
1970-01-01 03:00:03.000000
1970-01-01 03:00:03.000000
NULL
NULL
1970-01-01 03:00:20.000000
NULL
NULL
NULL
NULL
select timestamp(name) from test1;
timestamp(name)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
set @dt ='';
select date_add(@dt, interval 1 day);
date_add(@dt, interval 1 day)
NULL
select convert_tz(name, '+08:00', '+00:00') from test1;
convert_tz(name, '+08:00', '+00:00')
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select date_sub(name, interval 1 day) from test1;
date_sub(name, interval 1 day)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select timestampadd(hour, -8, name) from test1;
timestampadd(hour, -8, name)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
test oracle mode ||
set sql_mode=@oracle_mode_emptystring_equal_null;
select concat('a',null) from dual;
concat('a',null)
NULL
select concat('a','') from dual;
concat('a','')
NULL
select 'a'||null from dual;
'a'||null 
a
select 'a'||'' from dual;
'a'||''
a
set sql_mode=@default_mode_emptystring_equal_null;
test statistical function
select MAX(name) from test1;
MAX(name)
3
select MIN(name) from test1;
MIN(name)
1
select COUNT(name) from test1;
COUNT(name)
5
select sum(name) from test1;
sum(name)
29
select AVG(name) from test1;
AVG(name)
5.8
select least(c5,name) from test1 ;
least(c5,name)
1
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
test CAST
SELECT CAST(name AS decimal) from test1;
CAST(name AS decimal)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select to_date(name,'yyyy') from test1;
to_date(name,'yyyy')
0001-04-01 00:00:00
0002-04-01 00:00:00
0003-04-01 00:00:00
0003-04-01 00:00:00
NULL
NULL
0020-04-01 00:00:00
NULL
NULL
NULL
NULL
select CAST(name AS date) from test1;
CAST(name AS date)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select CAST(name AS time) from test1;
CAST(name AS time)
00:00:01
00:00:02
00:00:03
00:00:03
NULL
NULL
00:00:20
NULL
NULL
NULL
NULL
select CAST(name as binary) from test1;
CAST(name as binary)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select CAST(name as json) from test1;
CAST(name as json)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
test CONVERT
SELECT CONVERT(name , decimal) from test1;
CONVERT(name , decimal)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
test IF ,IFNULL
select name,IF(name>0,'Y','N') from test1;
name	IF(name>0,'Y','N')
1	Y
2	Y
3	Y
3	Y
NULL	N
NULL	N
20	Y
NULL	N
NULL	N
NULL	N
NULL	N
select name,IFNULL(name,'Y') from test1;
name	IFNULL(name,'Y')
1	1
2	2
3	3
3	3
NULL	Y
NULL	Y
20	20
NULL	Y
NULL	Y
NULL	Y
NULL	Y
select nullif(null,'') from dual;
nullif(null,'')
NULL
select nvl('',6) from dual;
nvl('',6)
6
select nvl(name,6) from test1;
nvl(name,6)
1
2
3
3
6
6
20
6
6
6
6
select '' is  null from dual;
'' is  null
1
select '' is not  null from dual;
'' is not  null
0
select ''  from dual;
NULL
NULL
select name is null from test1;
name is null
0
0
0
0
1
1
0
1
1
1
1
select name is not null from test1;
name is not null
1
1
1
1
0
0
1
0
0
0
0
test CASE WHEN THEN
SELECT CASE name WHEN -2 THEN 'name<0' WHEN 2 THEN 'name>0' ELSE 'other' END AS name from test1;
name
other
name>0
other
other
other
other
other
other
other
other
other
test UNION
select name from test1 union select c5 from test1;
name
1
2
3
NULL
20
c5
c510
test DISTINCT
select distinct name ,c5 from test1;
name	c5
1	c5
2	NULL
3	NULL
NULL	NULL
20	NULL
NULL	c510
select distinct name,count(name),count(''),count(*) from test1 group by name;
name	count(name)	count('')	count(*)
1	1	0	1
2	1	0	1
3	2	0	2
NULL	0	0	6
20	1	0	1
test JOIN
select * from test1 t  join test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL	1	1	11.32000	NULL	c5	NULL	c71	NULL
2	2	22.24500	NULL	NULL	2022-03-17 16:08:57	NULL	c82	2	2	22.24500	NULL	NULL	2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL	NULL	NULL	NULL	NULL	3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
7	20	NULL	NULL	NULL	NULL	NULL	NULL	7	20	NULL	NULL	NULL	NULL	NULL	NULL
select * from test1 t  inner join test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL	1	1	11.32000	NULL	c5	NULL	c71	NULL
2	2	22.24500	NULL	NULL	2022-03-17 16:08:57	NULL	c82	2	2	22.24500	NULL	NULL	2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL	NULL	NULL	NULL	NULL	3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
7	20	NULL	NULL	NULL	NULL	NULL	NULL	7	20	NULL	NULL	NULL	NULL	NULL	NULL
select * from test1 t  cross join test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL	1	1	11.32000	NULL	c5	NULL	c71	NULL
2	2	22.24500	NULL	NULL	2022-03-17 16:08:57	NULL	c82	2	2	22.24500	NULL	NULL	2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL	NULL	NULL	NULL	NULL	3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
7	20	NULL	NULL	NULL	NULL	NULL	NULL	7	20	NULL	NULL	NULL	NULL	NULL	NULL
select * from test1 t  straight_join test1 t1 on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL	1	1	11.32000	NULL	c5	NULL	c71	NULL
2	2	22.24500	NULL	NULL	2022-03-17 16:08:57	NULL	c82	2	2	22.24500	NULL	NULL	2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL	NULL	NULL	NULL	NULL	3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
7	20	NULL	NULL	NULL	NULL	NULL	NULL	7	20	NULL	NULL	NULL	NULL	NULL	NULL
select * from test1 t left join  test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL	1	1	11.32000	NULL	c5	NULL	c71	NULL
2	2	22.24500	NULL	NULL	2022-03-17 16:08:57	NULL	c82	2	2	22.24500	NULL	NULL	2022-03-17 16:08:57	NULL	c82
3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
5	NULL	NULL	NULL	NULL	2022-03-09 16:04:19	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
6	NULL	NULL	NULL	NULL	NULL	NULL	1	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
7	20	NULL	NULL	NULL	NULL	NULL	NULL	7	20	NULL	NULL	NULL	NULL	NULL	NULL
8	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
9	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
10	NULL	NULL	NULL	c510	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
11	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
select * from test1 t right join  test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL	1	1	11.32000	NULL	c5	NULL	c71	NULL
2	2	22.24500	NULL	NULL	2022-03-17 16:08:57	NULL	c82	2	2	22.24500	NULL	NULL	2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL	NULL	NULL	NULL	NULL	3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	5	NULL	NULL	NULL	NULL	2022-03-09 16:04:19	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	6	NULL	NULL	NULL	NULL	NULL	NULL	1
7	20	NULL	NULL	NULL	NULL	NULL	NULL	7	20	NULL	NULL	NULL	NULL	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	8	NULL	NULL	NULL	NULL	NULL	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	9	NULL	NULL	NULL	NULL	NULL	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	10	NULL	NULL	NULL	c510	NULL	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	11	NULL	NULL	NULL	NULL	NULL	NULL	NULL
test INSERT INTO
insert into test1 select * from test1;
ERROR 23000: Duplicate entry '1' for key 'test1.PRIMARY'
test IN
select name from test1 where name not in (1,2,3);
name
20
select name from test1 where name  in (1,2,3);
name
1
2
3
3
test replace
replace into test1(id,name,test_dec,test_blob,c5,c6) values(8, '', NULL, NULL, '', NULL);
ERROR 23000: Column 'c5' cannot be null
test SUBQUERY
SELECT * FROM test1 WHERE name = (SELECT name FROM test1 where id=5);
id	name	test_dec	test_blob	c5	c6	c7	c8
test where
select name from test1 where name > '';
name
select name from test1 where name = '';
name
test not null field c5 in where
select * from test1 where c5 is null;
id	name	test_dec	test_blob	c5	c6	c7	c8
2	2	22.24500	NULL	NULL	2022-03-17 16:08:57	NULL	c82
3	3	3.00000	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL
5	NULL	NULL	NULL	NULL	2022-03-09 16:04:19	NULL	NULL
6	NULL	NULL	NULL	NULL	NULL	NULL	1
7	20	NULL	NULL	NULL	NULL	NULL	NULL
8	NULL	NULL	NULL	NULL	NULL	NULL	NULL
9	NULL	NULL	NULL	NULL	NULL	NULL	NULL
11	NULL	NULL	NULL	NULL	NULL	NULL	NULL
select * from test1 where c5 is not null;
id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32000	NULL	c5	NULL	c71	NULL
10	NULL	NULL	NULL	c510	NULL	NULL	NULL
test not null field c5 in update insert op
set sql_mode=@oracle_mode_emptystring_equal_null;
DROP PROCEDURE IF EXISTS test_oracle_cursor_loop;
CREATE PROCEDURE test_oracle_cursor_loop() as
cursor c is select id,c5 from test1 ; 
BEGIN
for rec in  c loop
update test1 set c5=rec.c5 where id=rec.id;
select rec.id,rec.c5;
END LOOP;
END//
call test_oracle_cursor_loop;
rec.id	rec.c5
1	c5
ERROR 23000: Column 'c5' cannot be null
set sql_mode=@default_mode_emptystring_equal_null;
update test1 set c5='' where id=4;
ERROR 23000: Column 'c5' cannot be null
INSERT INTO `test1` VALUES (11, '', NULL, NULL, '', NULL, NULL, NULL);
ERROR 23000: Column 'c5' cannot be null
test oracmp function
select add_months('2021-2-28',name) from test1;
add_months('2021-2-28',name)
2021-03-31 00:00:00
2021-04-30 00:00:00
2021-05-31 00:00:00
2021-05-31 00:00:00
NULL
NULL
2022-10-31 00:00:00
NULL
NULL
NULL
NULL
select trunc(name) from test1;
trunc(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select chr(name) from test1;
chr(name)




NULL
NULL

NULL
NULL
NULL
NULL
select name,decode(name, '',1,2),decode(name,null,1,2) from test1;
name	decode(name, '',1,2)	decode(name,null,1,2)
1	2	2
2	2	2
3	2	2
3	2	2
NULL	1	1
NULL	1	1
20	2	2
NULL	1	1
NULL	1	1
NULL	1	1
NULL	1	1
select name,c5,decode(name, c5, 'one', 2, 'two', 'other') from test1;
name	c5	decode(name, c5, 'one', 2, 'two', 'other')
1	c5	other
2	NULL	two
3	NULL	other
3	NULL	other
NULL	NULL	one
NULL	NULL	one
20	NULL	other
NULL	NULL	one
NULL	NULL	one
NULL	c510	other
NULL	NULL	one
select name,dump(name) from test1;
name	dump(name)
1	Type=15 Len=3:1,0,49
2	Type=15 Len=3:1,0,50
3	Type=15 Len=3:1,0,51
3	Type=15 Len=3:1,0,51
NULL	NULL
NULL	NULL
20	Type=15 Len=4:2,0,50,48
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,instr(name,'1') from test1;
name	instr(name,'1')
1	1
2	0
3	0
3	0
NULL	NULL
NULL	NULL
20	0
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,instrb(name,'1') from test1;
name	instrb(name,'1')
1	1
2	0
3	0
3	0
NULL	NULL
NULL	NULL
20	0
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,length(name) from test1;
name	length(name)
1	1
2	1
3	1
3	1
NULL	NULL
NULL	NULL
20	2
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,lengthb(name) from test1;
name	lengthb(name)
1	1
2	1
3	1
3	1
NULL	NULL
NULL	NULL
20	2
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
explain select name,decode(name, '', 1, 2) from test1;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test1	NULL	ALL	NULL	NULL	NULL	NULL	11	100.00	NULL
show warnings;
Level	Code	Message
Note	1003	/* select#1 */ select `test`.`test1`.`name` AS `name`,decode(`test`.`test1`.`name`,NULL,1,2) AS `decode(name, '', 1, 2)` from `test`.`test1`
explain select group_concat(name order by id ASC) gc,name from test1 group by name;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test1	NULL	ALL	NULL	NULL	NULL	NULL	11	100.00	Using filesort
show  warnings;
Level	Code	Message
Note	1003	/* select#1 */ select group_concat(`test`.`test1`.`name` order by `test`.`test1`.`id` ASC separator ',') AS `gc`,`test`.`test1`.`name` AS `name` from `test`.`test1` group by `test`.`test1`.`name`
select group_concat(name order by id ASC) gc,name from test1 group by name;
gc	name
NULL	NULL
1	1
2	2
20	20
3,3	3
explain  select listagg(name,';') within group (order by id ASC  ) AS TOAL,name from test1 group by name ;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test1	NULL	ALL	NULL	NULL	NULL	NULL	11	100.00	Using filesort
show  warnings;
Level	Code	Message
Note	1003	/* select#1 */ select listagg(`test`.`test1`.`name` , ';') within group (order by `test`.`test1`.`id` ASC) AS `TOAL`,`test`.`test1`.`name` AS `name` from `test`.`test1` group by `test`.`test1`.`name`
select listagg(name,';') within group (order by id ASC  ) AS TOAL,name from test1 group by name ;
TOAL	name
NULL	NULL
1	1
2	2
20	20
3;3	3
select name,rpad_oracle(name,'1'),lpad_oracle(name,'1') from test1;
name	rpad_oracle(name,'1')	lpad_oracle(name,'1')
1	1	1
2	2	2
3	3	3
3	3	3
NULL	NULL	NULL
NULL	NULL	NULL
20	2	2
NULL	NULL	NULL
NULL	NULL	NULL
NULL	NULL	NULL
NULL	NULL	NULL
select name,rpad_oracle(name,5,'a'),lpad_oracle(name,0,'a') from test1;
name	rpad_oracle(name,5,'a')	lpad_oracle(name,0,'a')
1	1aaaa	NULL
2	2aaaa	NULL
3	3aaaa	NULL
3	3aaaa	NULL
NULL	NULL	NULL
NULL	NULL	NULL
20	20aaa	NULL
NULL	NULL	NULL
NULL	NULL	NULL
NULL	NULL	NULL
NULL	NULL	NULL
select REGEXP_COUNT(name,'1',1,'c') from test1 ;
REGEXP_COUNT(name,'1',1,'c')
1
0
0
0
NULL
NULL
0
NULL
NULL
NULL
NULL
select REGEXP_COUNT(id, name,1,'c') from test1 ;
REGEXP_COUNT(id, name,1,'c')
1
1
1
0
NULL
NULL
0
NULL
NULL
NULL
NULL
select trim(name) from test1;
trim(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select ltrim(name) from test1;
ltrim(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select rtrim(name) from test1;
rtrim(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select substr(name, -90, 7) from test1;
substr(name, -90, 7)




NULL
NULL

NULL
NULL
NULL
NULL
select substrb(name, -90, 7) from test1;
substrb(name, -90, 7)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select to_char(name) from test1;
to_char(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select to_date(name,'yyyy') from test1;
to_date(name,'yyyy')
0001-04-01 00:00:00
0002-04-01 00:00:00
0003-04-01 00:00:00
0003-04-01 00:00:00
NULL
NULL
0020-04-01 00:00:00
NULL
NULL
NULL
NULL
select to_number(name,'9999') from test1;
to_number(name,'9999')
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select to_number(name,'99.009') from test1;
to_number(name,'99.009')
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select to_number(name) from test1;
to_number(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select to_timestamp(name,'yy') from test1;
to_timestamp(name,'yy')
2001-04-01 00:00:00.000000
2002-04-01 00:00:00.000000
2003-04-01 00:00:00.000000
2003-04-01 00:00:00.000000
NULL
NULL
2020-04-01 00:00:00.000000
NULL
NULL
NULL
NULL
select translate(name,'','null') from test1;
translate(name,'','null')
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select translate(name,'1','=1') from test1;
translate(name,'1','=1')
=
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select trunc(name) from test1;
trunc(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select vsize(name) from test1;
vsize(name)
3
3
3
3
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select group_concat(name) from test1;
group_concat(name)
1,2,3,3,20
explain select wm_concat(name) from test1;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test1	NULL	ALL	NULL	NULL	NULL	NULL	11	100.00	NULL
show  warnings;
Level	Code	Message
Note	1003	/* select#1 */ select wm_concat(`test`.`test1`.`name` separator ',') AS `wm_concat(name)` from `test`.`test1`
select wm_concat(name) from test1;
wm_concat(name)
1,2,3,3,20
test group by 
select name from test1 group by name ;
name
1
2
3
NULL
20
select name,c8 from test1 group by name,c8 ;
name	c8
1	NULL
2	c82
3	NULL
NULL	NULL
NULL	1
20	NULL
select b.name from  (select * from test1) b left join test1 c on b.name=c.name group by b.name;
name
1
2
3
NULL
20
select name from (select * from test1 where id>3) b union select name from test1 group by name;
name
3
NULL
20
1
2
select * from test_view;
name
1
2
3
NULL
20
select c1,ca from (select name c1,  '' ca from test1 group by name) where ca is null;
c1	ca
1	NULL
2	NULL
3	NULL
NULL	NULL
20	NULL
test in and not in 
select name from test1 where name not in (1,2,'');
name
select name from test1 where name  in (1,2,null);
name
1
2
test set variable
set @a='';
select @a,name from test1 where name > @a;
@a	name
select @a,name from test1 where @a is null;
@a	name
NULL	1
NULL	2
NULL	3
NULL	3
NULL	NULL
NULL	NULL
NULL	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
test table index field
select * from t1 where c2 is null;
i1	c2	descr
1	NULL	empty string
2	NULL	empty string 2
-1	NULL	null
-2	NULL	null 2
select * from t2 where c2 is null;
i1	c2	descr
1	NULL	empty string
-1	NULL	null
2	NULL	empty string 2
-2	NULL	null 2
select * from t1 where c2 is not null;
i1	c2	descr
select * from t2 where c2 is not null;
i1	c2	descr
select i1,c2,descr "off, t1.c2=" from t1 where i1 > -99 and c2='';
i1	c2	off, t1.c2=
select i1,c2,descr 'off, t2.c2=' from t2 where i1 > -99 and c2='';
i1	c2	off, t2.c2=
select i1,c2,descr 'off, t1.c2 is null' from t1 where i1 > -99 and c2 is null;
i1	c2	off, t1.c2 is null
1	NULL	empty string
2	NULL	empty string 2
-1	NULL	null
-2	NULL	null 2
select i1,c2,descr 'off, t2.c2 is null' from t2 where i1 > -99 and c2 is null;
i1	c2	off, t2.c2 is null
1	NULL	empty string
-1	NULL	null
2	NULL	empty string 2
-2	NULL	null 2
test ------------------------oracle mode add  emptystring_equal_null ---------------------------------
set sql_mode=@oracle_mode_emptystring_equal_null;
test Numerical function
select name,abs(name) from test1;
name	abs(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,SQRT(name) from test1;
name	SQRT(name)
1	1
2	1.4142135623730951
3	1.7320508075688772
3	1.7320508075688772
NULL	NULL
NULL	NULL
20	4.47213595499958
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,MOD(name,1.5) from test1;
name	MOD(name,1.5)
1	1
2	0.5
3	0
3	0
NULL	NULL
NULL	NULL
20	0.5
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,CEIL(name) from test1;
name	CEIL(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,CEILING(name) from test1;
name	CEILING(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,FLOOR(name) from test1;
name	FLOOR(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,RAND(name) from test1;
name	RAND(name)
1	0.40540353712197724
2	0.6555866465490187
3	0.9057697559760601
3	0.9057697559760601
NULL	0.15522042769493574
NULL	0.15522042769493574
20	0.15888261251047497
NULL	0.15522042769493574
NULL	0.15522042769493574
NULL	0.15522042769493574
NULL	0.15522042769493574
select name,ROUND(name) from test1;
name	ROUND(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,SIGN(name) from test1;
name	SIGN(name)
1	1
2	1
3	1
3	1
NULL	NULL
NULL	NULL
20	1
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,POW(name,2) from test1;
name	POW(name,2)
1	1
2	4
3	9
3	9
NULL	NULL
NULL	NULL
20	400
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,POWER(name,2) from test1;
name	POWER(name,2)
1	1
2	4
3	9
3	9
NULL	NULL
NULL	NULL
20	400
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,SIN(name) from test1;
name	SIN(name)
1	0.8414709848078965
2	0.9092974268256817
3	0.1411200080598672
3	0.1411200080598672
NULL	NULL
NULL	NULL
20	0.9129452507276277
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,ASIN(name) from test1;
name	ASIN(name)
1	1.5707963267948966
2	NULL
3	NULL
3	NULL
NULL	NULL
NULL	NULL
20	NULL
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,COS(name) from test1;
name	COS(name)
1	0.5403023058681398
2	-0.4161468365471424
3	-0.9899924966004454
3	-0.9899924966004454
NULL	NULL
NULL	NULL
20	0.40808206181339196
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,ACOS(name) from test1;
name	ACOS(name)
1	0
2	NULL
3	NULL
3	NULL
NULL	NULL
NULL	NULL
20	NULL
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,TAN(name) from test1;
name	TAN(name)
1	<0>
2	<0>
3	<0>
3	<0>
NULL	<0>
NULL	<0>
20	<0>
NULL	<0>
NULL	<0>
NULL	<0>
NULL	<0>
select name,ATAN(name) from test1;
name	ATAN(name)
1	<0>
2	<0>
3	<0>
3	<0>
NULL	<0>
NULL	<0>
20	<0>
NULL	<0>
NULL	<0>
NULL	<0>
NULL	<0>
select name,COT(name) from test1;
name	COT(name)
1	<0>
2	<0>
3	<0>
3	<0>
NULL	<0>
NULL	<0>
20	<0>
NULL	<0>
NULL	<0>
NULL	<0>
NULL	<0>
test string function
select name,length(name) from test1;
name	length(name)
1	1
2	1
3	1
3	1
NULL	NULL
NULL	NULL
20	2
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,CONCAT(name) from test1;
name	CONCAT(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,CONCAT(name,'2') from test1;
name	CONCAT(name,'2')
1	12
2	22
3	32
3	32
NULL	NULL
NULL	NULL
20	202
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,concat(name,'') from test1;
name	concat(name,'')
1	NULL
2	NULL
3	NULL
3	NULL
NULL	NULL
NULL	NULL
20	NULL
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select concat('a','') from dual;
concat('a','')
NULL
select name,INSERT(name,1,1,'+') from test1;
name	INSERT(name,1,1,'+')
1	+
2	+
3	+
3	+
NULL	NULL
NULL	NULL
20	+0
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,LOWER(name) from test1;
name	LOWER(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,UPPER(name) from test1;
name	UPPER(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,LEFT(name,1) from test1;
name	LEFT(name,1)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	2
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,RIGHT(name,1) from test1;
name	RIGHT(name,1)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	0
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,TRIM(name) from test1;
name	TRIM(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,REPLACE(name,name,'') from test1;
name	REPLACE(name,name,'')
1	NULL
2	NULL
3	NULL
3	NULL
NULL	NULL
NULL	NULL
20	NULL
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,SUBSTRING(name,2) from test1;
name	SUBSTRING(name,2)
1	NULL
2	NULL
3	NULL
3	NULL
NULL	NULL
NULL	NULL
20	0
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,REVERSE(name) from test1;
name	REVERSE(name)
1	1
2	2
3	3
3	3
NULL	NULL
NULL	NULL
20	02
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select space('') from dual;
space('')
NULL
test date time funciton
select str_to_date(name, '%m/%d/%Y') from test1;
str_to_date(name, '%m/%d/%Y')
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select date_format(name, '%Y%m%d%H%i%s') from test1;
date_format(name, '%Y%m%d%H%i%s')
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select time_to_sec(name) from test1;
time_to_sec(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select sec_to_time(name) from test1;
sec_to_time(name)
00:00:01.000000
00:00:02.000000
00:00:03.000000
00:00:03.000000
NULL
NULL
00:00:20.000000
NULL
NULL
NULL
NULL
select makedate(name,31) from test1;
makedate(name,31)
2001-01-31
2002-01-31
2003-01-31
2003-01-31
NULL
NULL
2020-01-31
NULL
NULL
NULL
NULL
select maketime(name,15,31) from test1;
maketime(name,15,31)
01:15:31
02:15:31
03:15:31
03:15:31
NULL
NULL
20:15:31
NULL
NULL
NULL
NULL
select unix_timestamp(name) from test1;
unix_timestamp(name)
0
0
0
0
NULL
NULL
0
NULL
NULL
NULL
NULL
select from_unixtime(name) from test1;
from_unixtime(name)
1970-01-01 03:00:01.000000
1970-01-01 03:00:02.000000
1970-01-01 03:00:03.000000
1970-01-01 03:00:03.000000
NULL
NULL
1970-01-01 03:00:20.000000
NULL
NULL
NULL
NULL
select timestamp(name) from test1;
timestamp(name)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
set @dt ='';
select date_add(@dt, interval 1 day);
date_add(@dt, interval 1 day)
NULL
select convert_tz(name, '+08:00', '+00:00') from test1;
convert_tz(name, '+08:00', '+00:00')
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select date_sub(name, interval 1 day) from test1;
date_sub(name, interval 1 day)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select timestampadd(hour, -8, name) from test1;
timestampadd(hour, -8, name)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
test oracle mode ||
select concat('a',null) from dual;
concat('a',null)
NULL
select concat('a','') from dual;
concat('a','')
NULL
select 'a'||null from dual;
'a'||null 
a
select 'a'||'' from dual;
'a'||''
a
test statistical function
select MAX(name) from test1;
MAX(name)
3
select MIN(name) from test1;
MIN(name)
1
select COUNT(name) from test1;
COUNT(name)
5
select sum(name) from test1;
sum(name)
29
select AVG(name) from test1;
AVG(name)
5.8
select least(c5,name) from test1 ;
least(c5,name)
1
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
test CAST
SELECT CAST(name AS decimal) from test1;
CAST(name AS decimal)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select to_date(name,'yyyy') from test1;
to_date(name,'yyyy')
0001-04-01 00:00:00
0002-04-01 00:00:00
0003-04-01 00:00:00
0003-04-01 00:00:00
NULL
NULL
0020-04-01 00:00:00
NULL
NULL
NULL
NULL
select CAST(name AS date) from test1;
CAST(name AS date)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select CAST(name AS time) from test1;
CAST(name AS time)
00:00:01
00:00:02
00:00:03
00:00:03
NULL
NULL
00:00:20
NULL
NULL
NULL
NULL
select CAST(name as binary) from test1;
CAST(name as binary)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select CAST(name as json) from test1;
CAST(name as json)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
test CONVERT
SELECT CONVERT(name , decimal) from test1;
CONVERT(name , decimal)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
test IF ,IFNULL
select name,IF(name>0,'Y','N') from test1;
name	IF(name>0,'Y','N')
1	Y
2	Y
3	Y
3	Y
NULL	N
NULL	N
20	Y
NULL	N
NULL	N
NULL	N
NULL	N
select name,IFNULL(name,'Y') from test1;
name	IFNULL(name,'Y')
1	1
2	2
3	3
3	3
NULL	Y
NULL	Y
20	20
NULL	Y
NULL	Y
NULL	Y
NULL	Y
select nullif(null,'') from dual;
nullif(null,'')
NULL
select nvl('',6) from dual;
nvl('',6)
6
select nvl(name,6) from test1;
nvl(name,6)
1
2
3
3
6
6
20
6
6
6
6
select '' is  null from dual;
'' is  null 
1
select '' is not  null from dual;
'' is not  null 
0
select ''  from dual;
NULL
NULL
select name is null from test1;
name is null 
0
0
0
0
1
1
0
1
1
1
1
select name is not null from test1;
name is not null 
1
1
1
1
0
0
1
0
0
0
0
test CASE WHEN THEN
SELECT CASE name WHEN -2 THEN 'name<0' WHEN 2 THEN 'name>0' ELSE 'other' END AS name from test1;
name
other
name>0
other
other
other
other
other
other
other
other
other
test UNION
select name from test1 union select c5 from test1;
name
1
2
3
NULL
20
c5
c510
test DISTINCT
select distinct name ,c5 from test1;
name	c5
1	c5
2	NULL
3	NULL
NULL	NULL
20	NULL
NULL	c510
test JOIN
select * from test1 t  join test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32	NULL	c5	NULL	c71	NULL	1	1	11.32	NULL	c5	NULL	c71	NULL
2	2	22.245	NULL	NULL	2022-03-17 16:08:57	NULL	c82	2	2	22.245	NULL	NULL	2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL	NULL	NULL	NULL	NULL	3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
7	20	NULL	NULL	NULL	NULL	NULL	NULL	7	20	NULL	NULL	NULL	NULL	NULL	NULL
select * from test1 t  inner join test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32	NULL	c5	NULL	c71	NULL	1	1	11.32	NULL	c5	NULL	c71	NULL
2	2	22.245	NULL	NULL	2022-03-17 16:08:57	NULL	c82	2	2	22.245	NULL	NULL	2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL	NULL	NULL	NULL	NULL	3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
7	20	NULL	NULL	NULL	NULL	NULL	NULL	7	20	NULL	NULL	NULL	NULL	NULL	NULL
select * from test1 t  cross join test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32	NULL	c5	NULL	c71	NULL	1	1	11.32	NULL	c5	NULL	c71	NULL
2	2	22.245	NULL	NULL	2022-03-17 16:08:57	NULL	c82	2	2	22.245	NULL	NULL	2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL	NULL	NULL	NULL	NULL	3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
7	20	NULL	NULL	NULL	NULL	NULL	NULL	7	20	NULL	NULL	NULL	NULL	NULL	NULL
select * from test1 t  straight_join test1 t1 on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32	NULL	c5	NULL	c71	NULL	1	1	11.32	NULL	c5	NULL	c71	NULL
2	2	22.245	NULL	NULL	2022-03-17 16:08:57	NULL	c82	2	2	22.245	NULL	NULL	2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL	NULL	NULL	NULL	NULL	3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
7	20	NULL	NULL	NULL	NULL	NULL	NULL	7	20	NULL	NULL	NULL	NULL	NULL	NULL
select * from test1 t left join  test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32	NULL	c5	NULL	c71	NULL	1	1	11.32	NULL	c5	NULL	c71	NULL
2	2	22.245	NULL	NULL	2022-03-17 16:08:57	NULL	c82	2	2	22.245	NULL	NULL	2022-03-17 16:08:57	NULL	c82
3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
5	NULL	NULL	NULL	NULL	2022-03-09 16:04:19	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
6	NULL	NULL	NULL	NULL	NULL	NULL	1	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
7	20	NULL	NULL	NULL	NULL	NULL	NULL	7	20	NULL	NULL	NULL	NULL	NULL	NULL
8	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
9	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
10	NULL	NULL	NULL	c510	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
11	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
select * from test1 t right join  test1 t1  on t.name = t1.name;
id	name	test_dec	test_blob	c5	c6	c7	c8	id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32	NULL	c5	NULL	c71	NULL	1	1	11.32	NULL	c5	NULL	c71	NULL
2	2	22.245	NULL	NULL	2022-03-17 16:08:57	NULL	c82	2	2	22.245	NULL	NULL	2022-03-17 16:08:57	NULL	c82
4	3	NULL	NULL	NULL	NULL	NULL	NULL	3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL	4	3	NULL	NULL	NULL	NULL	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	5	NULL	NULL	NULL	NULL	2022-03-09 16:04:19	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	6	NULL	NULL	NULL	NULL	NULL	NULL	1
7	20	NULL	NULL	NULL	NULL	NULL	NULL	7	20	NULL	NULL	NULL	NULL	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	8	NULL	NULL	NULL	NULL	NULL	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	9	NULL	NULL	NULL	NULL	NULL	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	10	NULL	NULL	NULL	c510	NULL	NULL	NULL
NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	11	NULL	NULL	NULL	NULL	NULL	NULL	NULL
test INSERT INTO
insert into test1 select * from test1;
ERROR 23000: Duplicate entry '1' for key 'test1.PRIMARY'
test IN
select name from test1 where name not in (1,2,3);
name
20
select name from test1 where name  in (1,2,3);
name
1
2
3
3
test replace
replace into test1(id,name,test_dec,test_blob,c5,c6) values(8, '', NULL, NULL, '', NULL);
ERROR 23000: Column 'c5' cannot be null
test SUBQUERY
SELECT * FROM test1 WHERE name = (SELECT name FROM test1 where id=5);
id	name	test_dec	test_blob	c5	c6	c7	c8
test where
select name from test1 where name > '';
name
select name from test1 where name = '';
name
test not null field c5 in where
select * from test1 where c5 is null;
id	name	test_dec	test_blob	c5	c6	c7	c8
2	2	22.245	NULL	NULL	2022-03-17 16:08:57	NULL	c82
3	3	3	NULL	NULL	2022-03-17 16:04:15	NULL	NULL
4	3	NULL	NULL	NULL	NULL	NULL	NULL
5	NULL	NULL	NULL	NULL	2022-03-09 16:04:19	NULL	NULL
6	NULL	NULL	NULL	NULL	NULL	NULL	1
7	20	NULL	NULL	NULL	NULL	NULL	NULL
8	NULL	NULL	NULL	NULL	NULL	NULL	NULL
9	NULL	NULL	NULL	NULL	NULL	NULL	NULL
11	NULL	NULL	NULL	NULL	NULL	NULL	NULL
select * from test1 where c5 is not null;
id	name	test_dec	test_blob	c5	c6	c7	c8
1	1	11.32	NULL	c5	NULL	c71	NULL
10	NULL	NULL	NULL	c510	NULL	NULL	NULL
test not null field c5 in update insert op
DROP PROCEDURE IF EXISTS test_oracle_cursor_loop;
CREATE PROCEDURE test_oracle_cursor_loop() as
cursor c is select id,c5 from test1 ; 
BEGIN
for rec in  c loop
update test1 set c5=rec.c5 where id=rec.id;
select rec.id,rec.c5;
END LOOP;
END//
call test_oracle_cursor_loop;
rec.id	rec.c5
1	c5
ERROR 23000: Column 'c5' cannot be null
update test1 set c5='' where id=4;
ERROR 23000: Column 'c5' cannot be null
INSERT INTO `test1` VALUES (11, '', NULL, NULL, '', NULL, NULL, NULL);
ERROR 23000: Column 'c5' cannot be null
test oracmp function
select add_months('2021-2-28',name) from test1;
add_months('2021-2-28',name)
2021-03-31 00:00:00
2021-04-30 00:00:00
2021-05-31 00:00:00
2021-05-31 00:00:00
NULL
NULL
2022-10-31 00:00:00
NULL
NULL
NULL
NULL
select trunc(name) from test1;
trunc(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select chr(name) from test1;
chr(name)




NULL
NULL

NULL
NULL
NULL
NULL
select name,c5,decode(name, c5, 'one', 2, 'two', 'other') from test1;
name	c5	decode(name, c5, 'one', 2, 'two', 'other')
1	c5	other
2	NULL	two
3	NULL	other
3	NULL	other
NULL	NULL	one
NULL	NULL	one
20	NULL	other
NULL	NULL	one
NULL	NULL	one
NULL	c510	other
NULL	NULL	one
select name,dump(name) from test1;
name	dump(name)
1	Type=15 Len=3:1,0,49
2	Type=15 Len=3:1,0,50
3	Type=15 Len=3:1,0,51
3	Type=15 Len=3:1,0,51
NULL	NULL
NULL	NULL
20	Type=15 Len=4:2,0,50,48
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,instr(name,'1') from test1;
name	instr(name,'1')
1	1
2	0
3	0
3	0
NULL	NULL
NULL	NULL
20	0
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,instrb(name,'1') from test1;
name	instrb(name,'1')
1	1
2	0
3	0
3	0
NULL	NULL
NULL	NULL
20	0
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,length(name) from test1;
name	length(name)
1	1
2	1
3	1
3	1
NULL	NULL
NULL	NULL
20	2
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
select name,lengthb(name) from test1;
name	lengthb(name)
1	1
2	1
3	1
3	1
NULL	NULL
NULL	NULL
20	2
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
explain select group_concat(name order by id ASC) gc,name from test1 group by name;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test1	NULL	ALL	NULL	NULL	NULL	NULL	11	100.00	Using filesort
show  warnings;
Level	Code	Message
Note	1003	/* select#1 */ select group_concat("test"."test1"."name" order by "test"."test1"."id" ASC separator ',') AS "gc","test"."test1"."name" AS "name" from "test"."test1" group by "test"."test1"."name"
select group_concat(name order by id ASC) gc,name from test1 group by name;
gc	name
NULL	NULL
1	1
2	2
20	20
3,3	3
explain  select listagg(name,';') within group (order by id ASC  ) AS TOAL,name from test1 group by name ;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test1	NULL	ALL	NULL	NULL	NULL	NULL	11	100.00	Using filesort
show  warnings;
Level	Code	Message
Note	1003	/* select#1 */ select listagg("test"."test1"."name" , ';') within group (order by "test"."test1"."id" ASC) AS "TOAL","test"."test1"."name" AS "name" from "test"."test1" group by "test"."test1"."name"
select listagg(name,';') within group (order by id ASC  ) AS TOAL,name from test1 group by name ;
TOAL	name
NULL	NULL
1	1
2	2
20	20
3;3	3
select name,rpad_oracle(name,'1'),lpad_oracle(name,'1') from test1;
name	rpad_oracle(name,'1')	lpad_oracle(name,'1')
1	1	1
2	2	2
3	3	3
3	3	3
NULL	NULL	NULL
NULL	NULL	NULL
20	2	2
NULL	NULL	NULL
NULL	NULL	NULL
NULL	NULL	NULL
NULL	NULL	NULL
select name,rpad_oracle(name,5,'a'),lpad_oracle(name,0,'a') from test1;
name	rpad_oracle(name,5,'a')	lpad_oracle(name,0,'a')
1	1aaaa	NULL
2	2aaaa	NULL
3	3aaaa	NULL
3	3aaaa	NULL
NULL	NULL	NULL
NULL	NULL	NULL
20	20aaa	NULL
NULL	NULL	NULL
NULL	NULL	NULL
NULL	NULL	NULL
NULL	NULL	NULL
select REGEXP_COUNT(name,'1',1,'c') from test1 ;
REGEXP_COUNT(name,'1',1,'c')
1
0
0
0
NULL
NULL
0
NULL
NULL
NULL
NULL
select REGEXP_COUNT(id, name,1,'c') from test1 ;
REGEXP_COUNT(id, name,1,'c')
1
1
1
0
NULL
NULL
0
NULL
NULL
NULL
NULL
select trim(name) from test1;
trim(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select ltrim(name) from test1;
ltrim(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select rtrim(name) from test1;
rtrim(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select substr(name, -90, 7) from test1;
substr(name, -90, 7)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select substrb(name, -90, 7) from test1;
substrb(name, -90, 7)
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select to_char(name) from test1;
to_char(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select to_date(name,'yyyy') from test1;
to_date(name,'yyyy')
0001-04-01 00:00:00
0002-04-01 00:00:00
0003-04-01 00:00:00
0003-04-01 00:00:00
NULL
NULL
0020-04-01 00:00:00
NULL
NULL
NULL
NULL
select to_number(name,'9999') from test1;
to_number(name,'9999')
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select to_number(name,'99.009') from test1;
to_number(name,'99.009')
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select to_number(name) from test1;
to_number(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select to_timestamp(name,'yy') from test1;
to_timestamp(name,'yy')
2001-04-01 00:00:00.000000
2002-04-01 00:00:00.000000
2003-04-01 00:00:00.000000
2003-04-01 00:00:00.000000
NULL
NULL
2020-04-01 00:00:00.000000
NULL
NULL
NULL
NULL
select translate(name,'','null') from test1;
translate(name,'','null')
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select translate(name,'1','=1') from test1;
translate(name,'1','=1')
=
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select trunc(name) from test1;
trunc(name)
1
2
3
3
NULL
NULL
20
NULL
NULL
NULL
NULL
select vsize(name) from test1;
vsize(name)
3
3
3
3
NULL
NULL
NULL
NULL
NULL
NULL
NULL
select group_concat(name) from test1;
group_concat(name)
1,2,3,3,20
explain select wm_concat(name) from test1;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test1	NULL	ALL	NULL	NULL	NULL	NULL	11	100.00	NULL
show  warnings;
Level	Code	Message
Note	1003	/* select#1 */ select wm_concat("test"."test1"."name" separator ',') AS "wm_concat(name)" from "test"."test1"
select wm_concat(name) from test1;
wm_concat(name)
1,2,3,3,20
test group by 
select name from test1 group by name ;
name
1
2
3
NULL
20
select name,c8 from test1 group by name,c8 ;
name	c8
1	NULL
2	c82
3	NULL
NULL	NULL
NULL	1
20	NULL
select b.name from  (select * from test1) b left join test1 c on b.name=c.name group by b.name;
name
1
2
3
NULL
20
select name from (select * from test1 where id>3) b union select name from test1 group by name;
name
3
NULL
20
1
2
select * from test_view;
name
1
2
3
NULL
20
test in and not in 
select name from test1 where name not in (1,2,'');
name
select name from test1 where name  in (1,2,null);
name
1
2
test set variable
set @a='';
select @a,name from test1 where name > @a;
@a	name
select @a,name from test1 where @a is null;
@a	name
NULL	1
NULL	2
NULL	3
NULL	3
NULL	NULL
NULL	NULL
NULL	20
NULL	NULL
NULL	NULL
NULL	NULL
NULL	NULL
test table index field
select * from t1 where c2 is null;
i1	c2	descr
1	NULL	empty string
2	NULL	empty string 2
-1	NULL	null
-2	NULL	null 2
select * from t2 where c2 is null;
i1	c2	descr
1	NULL	empty string
-1	NULL	null
2	NULL	empty string 2
-2	NULL	null 2
select * from t1 where c2 is not null;
i1	c2	descr
select * from t2 where c2 is not null;
i1	c2	descr
select i1,c2,descr "on, t1.c2=" from t1 where i1 > -99 and c2='';
i1	c2	on, t1.c2=
select i1,c2,descr 'on, t2.c2=' from t2 where i1 > -99 and c2='';
i1	c2	on, t2.c2=
select i1,c2,descr 'on, t1.c2 is null' from t1 where i1 > -99 and c2 is null;
i1	c2	on, t1.c2 is null
1	NULL	empty string
2	NULL	empty string 2
-1	NULL	null
-2	NULL	null 2
select i1,c2,descr 'on, t2.c2 is null' from t2 where i1 > -99 and c2 is null;
i1	c2	on, t2.c2 is null
1	NULL	empty string
-1	NULL	null
2	NULL	empty string 2
-2	NULL	null 2
# test lob
select *,'esn=on' from lob1;
id	c2	b3	esn=on
0	NULL	NULL	esn=on
1	NULL	NULL	esn=on
2	a	a	esn=on
3	NULL	NULL	esn=on
4	b	b	esn=on
select listagg(c2,','),group_concat(c2) ,'esn=on' from lob1;
listagg(c2,',')	group_concat(c2)	esn=on
a,b	a,b	esn=on
# test enum/set
select *,s3+0,null+0,'esn=on' from es1;
id	e2	s3	vc4	s3+0	null+0	esn=on
0	NULL	NULL	NULL	NULL	NULL	esn=on
100	NULL	NULL	NULL	NULL	NULL	esn=on
2	Y	a	a	2	NULL	esn=on
103	N	NULL	NULL	NULL	NULL	esn=on
select listagg(s3,','),group_concat(s3),'esn=on' from es1;
listagg(s3,',')	group_concat(s3)	esn=on
a	a	esn=on
set sql_mode=default;
current behavior
create table t3 as select * from t1;
select will output as the data is, no ''/null translation
select *,'off,select' from t3;
i1	c2	descr	off,select
1		empty string	off,select
-1	NULL	null	off,select
2		empty string 2	off,select
-2	NULL	null 2	off,select
set sql_mode=@default_mode_emptystring_equal_null;
select *,'on,select' from t3;
i1	c2	descr	on,select
1	NULL	empty string	on,select
-1	NULL	null	on,select
2	NULL	empty string 2	on,select
-2	NULL	null 2	on,select
set sql_mode=@default_mode;
update may do ''/null translation
set sql_mode=@default_mode_emptystring_equal_null;
update t3 set c2=c2;
select *,'on,update c2=c2' from t3;
i1	c2	descr	on,update c2=c2
1	NULL	empty string	on,update c2=c2
-1	NULL	null	on,update c2=c2
2	NULL	empty string 2	on,update c2=c2
-2	NULL	null 2	on,update c2=c2
set sql_mode=@default_mode;
create table x select * from xxx
set sql_mode=@default_mode_emptystring_equal_null;
drop table t3;
create table t3 as select * from t1;
select *,'on,create as select' from t3;
i1	c2	descr	on,create as select
1	NULL	empty string	on,create as select
-1	NULL	null	on,create as select
2	NULL	empty string 2	on,create as select
-2	NULL	null 2	on,create as select
analytic function
select id,name,group_concat(name) over (partition by id) from test2;
id	name	group_concat(name) over (partition by id)
10	1	1,2,3,3
10	2	1,2,3,3
10	3	1,2,3,3
10	3	1,2,3,3
20	NULL	20
20	NULL	20
20	20	20
30	8	8
30	NULL	8
40	NULL	NULL
40	NULL	NULL
50	NULL	NULL
50	NULL	NULL
explain select id,name,group_concat(name) over (partition by id) from test2;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test2	NULL	ALL	NULL	NULL	NULL	NULL	13	100.00	Using filesort
show warnings;
Level	Code	Message
Note	3598	To get information about window functions use EXPLAIN FORMAT=JSON
Note	1003	/* select#1 */ select `test`.`test2`.`id` AS `id`,`test`.`test2`.`name` AS `name`,group_concat(`test`.`test2`.`name` separator ',') OVER (PARTITION BY `test`.`test2`.`id` )  AS `group_concat(name) over (partition by id)` from `test`.`test2`
select id,name,wm_concat(name) over (partition by id) from test2;
id	name	wm_concat(name) over (partition by id)
10	1	1,2,3,3
10	2	1,2,3,3
10	3	1,2,3,3
10	3	1,2,3,3
20	NULL	20
20	NULL	20
20	20	20
30	8	8
30	NULL	8
40	NULL	NULL
40	NULL	NULL
50	NULL	NULL
50	NULL	NULL
explain select id,name,wm_concat(name) over (partition by id) from test2;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test2	NULL	ALL	NULL	NULL	NULL	NULL	13	100.00	Using filesort
show warnings;
Level	Code	Message
Note	3598	To get information about window functions use EXPLAIN FORMAT=JSON
Note	1003	/* select#1 */ select `test`.`test2`.`id` AS `id`,`test`.`test2`.`name` AS `name`,wm_concat(`test`.`test2`.`name` separator ',') OVER (PARTITION BY `test`.`test2`.`id` )  AS `wm_concat(name) over (partition by id)` from `test`.`test2`
select id,name,listagg(name) over (partition by id) from test2;
id	name	listagg(name) over (partition by id)
10	1	1233
10	2	1233
10	3	1233
10	3	1233
20	NULL	20
20	NULL	20
20	20	20
30	8	8
30	NULL	8
40	NULL	NULL
40	NULL	NULL
50	NULL	NULL
50	NULL	NULL
explain select id,name,listagg(name) over (partition by id) from test2;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test2	NULL	ALL	NULL	NULL	NULL	NULL	13	100.00	Using filesort
show warnings;
Level	Code	Message
Note	3598	To get information about window functions use EXPLAIN FORMAT=JSON
Note	1003	/* select#1 */ select `test`.`test2`.`id` AS `id`,`test`.`test2`.`name` AS `name`,listagg(`test`.`test2`.`name` , '') OVER (PARTITION BY `test`.`test2`.`id` )  AS `listagg(name) over (partition by id)` from `test`.`test2`
select id,name,group_concat(name order by name) over (partition by id) from test2;
id	name	group_concat(name order by name) over (partition by id)
10	1	1,2,3,3
10	2	1,2,3,3
10	3	1,2,3,3
10	3	1,2,3,3
20	NULL	20
20	NULL	20
20	20	20
30	NULL	8
30	8	8
40	NULL	NULL
40	NULL	NULL
50	NULL	NULL
50	NULL	NULL
explain select id,name,group_concat(name order by name) over (partition by id) from test2;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test2	NULL	ALL	NULL	NULL	NULL	NULL	13	100.00	Using filesort
show warnings;
Level	Code	Message
Note	3598	To get information about window functions use EXPLAIN FORMAT=JSON
Note	1003	/* select#1 */ select `test`.`test2`.`id` AS `id`,`test`.`test2`.`name` AS `name`,group_concat(`test`.`test2`.`name` order by `test`.`test2`.`name` separator ',') OVER (PARTITION BY `test`.`test2`.`id` )  AS `group_concat(name order by name) over (partition by id)` from `test`.`test2`
select id,name,wm_concat(name order by name) over (partition by id) from test2;
id	name	wm_concat(name order by name) over (partition by id)
10	1	1,2,3,3
10	2	1,2,3,3
10	3	1,2,3,3
10	3	1,2,3,3
20	NULL	20
20	NULL	20
20	20	20
30	NULL	8
30	8	8
40	NULL	NULL
40	NULL	NULL
50	NULL	NULL
50	NULL	NULL
explain select id,name,wm_concat(name order by name) over (partition by id) from test2;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test2	NULL	ALL	NULL	NULL	NULL	NULL	13	100.00	Using filesort
show warnings;
Level	Code	Message
Note	3598	To get information about window functions use EXPLAIN FORMAT=JSON
Note	1003	/* select#1 */ select `test`.`test2`.`id` AS `id`,`test`.`test2`.`name` AS `name`,wm_concat(`test`.`test2`.`name` order by `test`.`test2`.`name` separator ',') OVER (PARTITION BY `test`.`test2`.`id` )  AS `wm_concat(name order by name) over (partition by id)` from `test`.`test2`
select id,name,listagg(name) within group (order by name) over (partition by id) from test2;
id	name	listagg(name) within group (order by name) over (partition by id)
10	1	1233
10	2	1233
10	3	1233
10	3	1233
20	NULL	20
20	NULL	20
20	20	20
30	NULL	8
30	8	8
40	NULL	NULL
40	NULL	NULL
50	NULL	NULL
50	NULL	NULL
explain select id,name,listagg(name) within group (order by name) over (partition by id) from test2;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	test2	NULL	ALL	NULL	NULL	NULL	NULL	13	100.00	Using filesort
show warnings;
Level	Code	Message
Note	3598	To get information about window functions use EXPLAIN FORMAT=JSON
Note	1003	/* select#1 */ select `test`.`test2`.`id` AS `id`,`test`.`test2`.`name` AS `name`,listagg(`test`.`test2`.`name` , '') within group (order by `test`.`test2`.`name`) OVER (PARTITION BY `test`.`test2`.`id` )  AS `listagg(name) within group (order by name) over (partition by id)` from `test`.`test2`
procedure、function
set sql_mode=@oracle_mode;
create or replace procedure p2 as
ib int :=10;
begin
select c2,isnull(c2),'p-on,e-off' from t1 where c2 is null ;
end //
set sql_mode=@oracle_mode_emptystring_equal_null;
call p2();
c2	isnull(c2)	p-on,e-off
NULL	1	p-on,e-off
NULL	1	p-on,e-off
set sql_mode=@oracle_mode_emptystring_equal_null;
create or replace procedure p2 as
ib int :=10;
begin
select c2,isnull(c2),'p-on,e-off' from t1 where c2 is null ;
end//
set sql_mode=@default_mode;
call p2();
c2	isnull(c2)	p-on,e-off
NULL	1	p-on,e-off
NULL	1	p-on,e-off
NULL	1	p-on,e-off
NULL	1	p-on,e-off
set sql_mode=@oracle_mode;
create or replace function f1() return int deterministic is  
f_var int;  
begin  
select '' is null into f_var;
return f_var;  
end//
set sql_mode=@oracle_mode_emptystring_equal_null;
select f1();
f1()
0
set sql_mode=@oracle_mode_emptystring_equal_null;
create or replace function f1() return int deterministic is  
f_var int;  
begin  
select '' is null into f_var;
return f_var;  
end//
set sql_mode=@default_mode;
select f1();
f1()
1
set sql_mode=default;
CREATE TABLE t_bug9197 (
i1 int,
c2 varchar(16) default '',
c3 blob,
c4 char(16) default '',
descr VARCHAR(16),
key(c2),
key(c3(16)),
key(c4));
INSERT INTO t_bug9197 VALUES (1, '', '', '', 'empty string');
INSERT INTO t_bug9197 VALUES (-1, NULL, NULL, NULL, 'null');
INSERT INTO t_bug9197 VALUES (2, '', '', '', 'empty string 2');
INSERT INTO t_bug9197 VALUES (-2, NULL, NULL, NULL, 'null 2');
insert into t_bug9197 values (3, '22', '22', '22', '22');
set sql_mode=emptystring_equal_null;
select * from t_bug9197 where c2 is null;
i1	c2	c3	c4	descr
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
select * from t_bug9197 where c3 is null;
i1	c2	c3	c4	descr
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
select /*+ no_index(a) */ * from t_bug9197 a where c3 is null;
i1	c2	c3	c4	descr
1	NULL	NULL	NULL	empty string
-1	NULL	NULL	NULL	null
2	NULL	NULL	NULL	empty string 2
-2	NULL	NULL	NULL	null 2
select * from t_bug9197 where c4 is null;
i1	c2	c3	c4	descr
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
bug
select * from t_bug9197 where c2 = '';
i1	c2	c3	c4	descr
select * from t_bug9197 where c2 >= '';
i1	c2	c3	c4	descr
select * from t_bug9197 where c2 <= '';
i1	c2	c3	c4	descr
select * from t_bug9197 where c2 = '\0';
i1	c2	c3	c4	descr
select * from t_bug9197 where c2 >= '\0';
i1	c2	c3	c4	descr
3	22	22	22	22
select * from t_bug9197 where c2 <= '\0';
i1	c2	c3	c4	descr
select * from t_bug9197 where c2 != '\0';
i1	c2	c3	c4	descr
3	22	22	22	22
select * from t_bug9197 where c2 != '0';
i1	c2	c3	c4	descr
3	22	22	22	22
select * from t_bug9197 where c2 is null or (c2 >='' and c2 <= 'aa');
i1	c2	c3	c4	descr
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
select * from t_bug9197 where c2 is null or c2 = '22';
i1	c2	c3	c4	descr
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
3	22	22	22	22
select * from t_bug9197 where c2 is null or (c2 >='' or c2 >= '22');
i1	c2	c3	c4	descr
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
3	22	22	22	22
select * from t_bug9197 where c2 >='' or c2 >= '22';
i1	c2	c3	c4	descr
3	22	22	22	22
select * from t_bug9197 where c2 >='' or c2 <= '22';
i1	c2	c3	c4	descr
3	22	22	22	22
select * from t_bug9197 where c3 = '';
i1	c2	c3	c4	descr
select * from t_bug9197 where c3 >= '';
i1	c2	c3	c4	descr
select * from t_bug9197 where c3 <= '';
i1	c2	c3	c4	descr
select * from t_bug9197 where c3 = '\0';
i1	c2	c3	c4	descr
select * from t_bug9197 where c3 >= '\0';
i1	c2	c3	c4	descr
3	22	22	22	22
select * from t_bug9197 where c3 <= '\0';
i1	c2	c3	c4	descr
select * from t_bug9197 where c3 != '\0';
i1	c2	c3	c4	descr
3	22	22	22	22
select * from t_bug9197 where c3 != '0';
i1	c2	c3	c4	descr
3	22	22	22	22
select * from t_bug9197 where c3 is null or (c3 >='' and c3 <= 'aa');
i1	c2	c3	c4	descr
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
select * from t_bug9197 where c3 is null or c3 = '22';
i1	c2	c3	c4	descr
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
3	22	22	22	22
select * from t_bug9197 where c3 is null or (c3 >='' or c3 >= '22');
i1	c2	c3	c4	descr
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
3	22	22	22	22
select * from t_bug9197 where c3 >='' or c3 >= '22';
i1	c2	c3	c4	descr
3	22	22	22	22
select * from t_bug9197 where c3 >='' or c3 <= '22';
i1	c2	c3	c4	descr
3	22	22	22	22
select * from t_bug9197 where c3 ='\0' or c3 is null or c2 = '22';
i1	c2	c3	c4	descr
1	NULL	NULL	NULL	empty string
-1	NULL	NULL	NULL	null
2	NULL	NULL	NULL	empty string 2
-2	NULL	NULL	NULL	null 2
3	22	22	22	22
select * from t_bug9197 where c2 is null or c2='22';
i1	c2	c3	c4	descr
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
3	22	22	22	22
select * from t_bug9197 where c3 is null or c3='22';
i1	c2	c3	c4	descr
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
3	22	22	22	22
select * from t_bug9197 where c2 is null or c3='22';
i1	c2	c3	c4	descr
1	NULL	NULL	NULL	empty string
-1	NULL	NULL	NULL	null
2	NULL	NULL	NULL	empty string 2
-2	NULL	NULL	NULL	null 2
3	22	22	22	22
select * from t_bug9197 where c3 is null or c2='22';
i1	c2	c3	c4	descr
1	NULL	NULL	NULL	empty string
-1	NULL	NULL	NULL	null
2	NULL	NULL	NULL	empty string 2
-2	NULL	NULL	NULL	null 2
3	22	22	22	22
select /*+ no_index(a) */ * from t_bug9197 a where c2 is null or c2='22';
i1	c2	c3	c4	descr
1	NULL	NULL	NULL	empty string
-1	NULL	NULL	NULL	null
2	NULL	NULL	NULL	empty string 2
-2	NULL	NULL	NULL	null 2
3	22	22	22	22
select /*+ no_index(a) */ * from t_bug9197 a where c3 is null or c3='22';
i1	c2	c3	c4	descr
1	NULL	NULL	NULL	empty string
-1	NULL	NULL	NULL	null
2	NULL	NULL	NULL	empty string 2
-2	NULL	NULL	NULL	null 2
3	22	22	22	22
select /*+ no_index(a) */ * from t_bug9197 a where c2 is null or c3='22';
i1	c2	c3	c4	descr
1	NULL	NULL	NULL	empty string
-1	NULL	NULL	NULL	null
2	NULL	NULL	NULL	empty string 2
-2	NULL	NULL	NULL	null 2
3	22	22	22	22
select /*+ no_index(a) */ * from t_bug9197 a where c3 is null or c2='22';
i1	c2	c3	c4	descr
1	NULL	NULL	NULL	empty string
-1	NULL	NULL	NULL	null
2	NULL	NULL	NULL	empty string 2
-2	NULL	NULL	NULL	null 2
3	22	22	22	22
select * from t_bug9197 where c2 is null or c2='22' intersect select * from t_bug9197 where c2 is null or c2='22';
i1	c2	c3	c4	descr
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
3	22	22	22	22
select * from t_bug9197 where c3 is null or c3='22' intersect select * from t_bug9197 where c3 is null or c3='22';
i1	c2	c3	c4	descr
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
3	22	22	22	22
select * from t_bug9197 where c2 is null or c2='22' intersect select * from t_bug9197 where c3 is null or c3='22';
i1	c2	c3	c4	descr
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
3	22	22	22	22
select * from t_bug9197 where c2 is null or c2='22' minus select * from t_bug9197 where c2 is null or c2='22';
i1	c2	c3	c4	descr
select * from t_bug9197 where c3 is null or c3='22' minus select * from t_bug9197 where c3 is null or c3='22';
i1	c2	c3	c4	descr
select * from t_bug9197 where c2 is null or c2='22' minus select * from t_bug9197 where c3 is null or c3='22';
i1	c2	c3	c4	descr
select * from t_bug9197 where c2 is null or c2='' or c2='22';
i1	c2	c3	c4	descr
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
3	22	22	22	22
select * from t_bug9197 where c2 is null or c2='\0' or c2='22';
i1	c2	c3	c4	descr
-1	NULL	NULL	NULL	null
-2	NULL	NULL	NULL	null 2
1	NULL	NULL	NULL	empty string
2	NULL	NULL	NULL	empty string 2
3	22	22	22	22
set sql_mode=default;
create table t_range (
pk int primary key,
c1 varchar(8),
c2 varchar(8),
c3 varchar(8),
key(c1,c2,c3)
);
insert into t_range values (11,'','','');
insert into t_range values (12,'','',NULL);
insert into t_range values (13,'',NULL,'');
insert into t_range values (14,'',NULL,NULL);
insert into t_range values (15,NULL,'','');
insert into t_range values (16,NULL,'',NULL);
insert into t_range values (17,NULL,NULL,'');
insert into t_range values (18,NULL,NULL,NULL);
insert into t_range values (19,'','aa','');
insert into t_range values (20,NULL,'aa',NULL);
insert into t_range values (21,'','bb','');
insert into t_range values (22,NULL,'bb',NULL);
set sql_mode=emptystring_equal_null;
select * from t_range where c1 is null and  (c2 >= 'bb') and c3 is null;
pk	c1	c2	c3
22	NULL	bb	NULL
21	NULL	bb	NULL
select * from t_range where c1 is null and  (c2 between 'aa' and 'bb') and c3 is null;
pk	c1	c2	c3
20	NULL	aa	NULL
22	NULL	bb	NULL
19	NULL	aa	NULL
21	NULL	bb	NULL
select * from t_range where c1 is null and  (c2 <= 'bb') and c3 is null;
pk	c1	c2	c3
20	NULL	aa	NULL
22	NULL	bb	NULL
19	NULL	aa	NULL
21	NULL	bb	NULL
select * from t_range where c1 is null and  (c2 = 'aa' and c2 <='bb') and c3 is null;
pk	c1	c2	c3
20	NULL	aa	NULL
19	NULL	aa	NULL
select * from t_range where c1 is null and  (c2 > 'aa' and c2 <='bb') and c3 is null;
pk	c1	c2	c3
22	NULL	bb	NULL
21	NULL	bb	NULL
select * from t_range where c1 is null and  (c2 in (null,'aa','bb')) and c3 is null;
pk	c1	c2	c3
20	NULL	aa	NULL
22	NULL	bb	NULL
19	NULL	aa	NULL
21	NULL	bb	NULL
select * from t_range where (c1 ='\0' or c1 is null) and (c2 >= 'bb') and (c3 ='\0' or c3 is null) ;
pk	c1	c2	c3
22	NULL	bb	NULL
21	NULL	bb	NULL
select * from t_range where (c1 ='\0' or c1 is null) and (c2 <= 'bb') and (c3 ='\0' or c3 is null) ;
pk	c1	c2	c3
20	NULL	aa	NULL
22	NULL	bb	NULL
19	NULL	aa	NULL
21	NULL	bb	NULL
set sql_mode='oracle,emptystring_equal_null';
CREATE GLOBAL TEMPORARY TABLE gt_employee (
id int PRIMARY KEY AUTO_INCREMENT,
name VARCHAR(16),
deptId int,
i int INVISIBLE,
`SHAPE` geometry NOT NULL,
`sidec` INT(11) GENERATED ALWAYS AS (SQRT(((`i` * `deptId`) + (`i` * `deptId`)))) VIRTUAL
) on commit delete rows ENGINE=innodb AUTO_INCREMENT=10;
Warnings:
Warning	1681	Integer display width is deprecated and will be removed in a future release.
CREATE TABLE employee (
`id1` geometry NOT NULL,
`id2` geometry,
`id3` blob NOT NULL,
`id4` blob
);
CREATE TEMPORARY TABLE t_employee (
`id1` geometry NOT NULL,
`id2` geometry,
`id3` blob NOT NULL,
`id4` blob
);
drop table gt_employee;
drop table employee;
drop table t_employee;
set sql_mode='emptystring_equal_null';
CREATE TABLE employee (
`id1` geometry NOT NULL,
`id2` geometry,
`id3` blob NOT NULL,
`id4` blob
);
CREATE TEMPORARY TABLE t_employee (
`id1` geometry NOT NULL,
`id2` geometry,
`id3` blob NOT NULL,
`id4` blob
);
drop table employee;
drop table t_employee;
CREATE TABLE employee ( `id` geometry NOT NULL );
drop table employee;
CREATE TABLE employee ( `id` blob NOT NULL );
drop table employee;
CREATE TABLE employee ( `id` varchar(32) NOT NULL );
drop table employee;
CREATE TABLE employee ( `id` char(32) NOT NULL );
drop table employee;
CREATE TABLE employee ( `id` set('a', 'b') NOT NULL );
drop table employee;
CREATE TABLE employee ( `id` int NOT NULL );
drop table employee;
CREATE TABLE employee ( `id` enum('N', 'Y') NOT NULL );
drop table employee;
CREATE TABLE employee ( `id` geometry  );
drop table employee;
CREATE TABLE employee ( `id` blob  );
drop table employee;
CREATE TABLE employee ( `id` varchar(32)  );
drop table employee;
CREATE TABLE employee ( `id` char(32)  );
drop table employee;
CREATE TABLE employee ( `id` set('a', 'b')  );
drop table employee;
CREATE TABLE employee ( `id` int );
drop table employee;
CREATE TABLE employee ( `id` enum('N', 'Y') );
drop table employee;
set sql_mode=default;
drop table t1;
create table t1 (
pk int primary key,
c1 varchar(8),
c2 varchar(8),
c3 varchar(8),
key(c1,c2,c3)
);
insert into t1 select * from t_range order by pk;
set sql_mode=emptystring_equal_null;
select pk,c1,c2,c3 from t1 where c1 is null and  (c2 between 'aa' and 'bb') and c3 is null;
pk	c1	c2	c3
20	NULL	aa	NULL
22	NULL	bb	NULL
19	NULL	aa	NULL
21	NULL	bb	NULL
alter table t1 add column hidden_pk bigint not null unique  auto_increment first;
select pk,c1,c2,c3,hidden_pk from t1 where c1 is null and  (c2 between 'aa' and 'bb') and c3 is null;
pk	c1	c2	c3	hidden_pk
20	NULL	aa	NULL	10
22	NULL	bb	NULL	12
19	NULL	aa	NULL	9
21	NULL	bb	NULL	11
alter table t1 drop column hidden_pk;
select pk,c1,c2,c3 from t1 where c1 is null and  (c2 between 'aa' and 'bb') and c3 is null;
pk	c1	c2	c3
20	NULL	aa	NULL
22	NULL	bb	NULL
19	NULL	aa	NULL
21	NULL	bb	NULL
drop procedure if exists test_oracle_cursor_loop;
drop procedure if exists p2;
drop function  if exists f1;
drop table es1;
drop table lob1;
drop table test2;
drop table test1;
drop view  test_view;
drop table t1;
drop table t2;
drop table t3;
drop table t_bug9197;
###test bug 9699###
set sql_mode=default;
CREATE TABLE `t1` (
`c1` int NOT NULL AUTO_INCREMENT,
`c2` datetime DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (`c1`)
);
CREATE TABLE `t2` (
`c1` int AUTO_INCREMENT PRIMARY KEY,
`c2` varchar(100)
);
insert into t2 values(1, '2020-01-01 00:00:00'), (2, ''), (3, null),(4, '\0');
select * from t2 into outfile 'MYSQLTEST_VARDIR/tmp/t1' FIELDS TERMINATED BY ',';
drop table t2;
delete from t1;
set sql_mode=emptystring_equal_null;
LOAD DATA INFILE 'MYSQLTEST_VARDIR/tmp/t1' INTO TABLE t1 FIELDS TERMINATED BY ',';
Warnings:
Warning	1265	Data truncated for column 'c2' at row 4
set sql_mode=default;
select * from t1;
c1	c2
1	2020-01-01 00:00:00
2	NULL
3	NULL
4	0000-00-00 00:00:00
delete from t1;
alter table t1 add column c3 varchar(100);
[test set = '']
set sql_mode=emptystring_equal_null;
LOAD DATA INFILE 'MYSQLTEST_VARDIR/tmp/t1' INTO TABLE t1 FIELDS TERMINATED BY ','(c1, c2) set c3 = '';
Warnings:
Warning	1265	Data truncated for column 'c2' at row 4
set sql_mode=default;
select * from t1;
c1	c2	c3
1	2020-01-01 00:00:00	NULL
2	NULL	NULL
3	NULL	NULL
4	0000-00-00 00:00:00	NULL
delete from t1;
[test set with func contains '']
set sql_mode=emptystring_equal_null;
LOAD DATA INFILE 'MYSQLTEST_VARDIR/tmp/t1' INTO TABLE t1 FIELDS TERMINATED BY ','(c1, c2) set c3 = concat('', 'aaaa');
Warnings:
Warning	1265	Data truncated for column 'c2' at row 4
set sql_mode=default;
select * from t1;
c1	c2	c3
1	2020-01-01 00:00:00	NULL
2	NULL	NULL
3	NULL	NULL
4	0000-00-00 00:00:00	NULL
delete from t1;
[test load with user_var]
set sql_mode=emptystring_equal_null;
LOAD DATA INFILE 'MYSQLTEST_VARDIR/tmp/t1' INTO TABLE t1 FIELDS TERMINATED BY ','(c1, @var1) set c2 = @var1, c3 = concat(@var1, 'aaaa');
Warnings:
Warning	1265	Data truncated for column 'c2' at row 4
set sql_mode=default;
select * from t1;
c1	c2	c3
1	2020-01-01 00:00:00	2020-01-01 00:00:00aaaa
2	NULL	NULL
3	NULL	NULL
4	0000-00-00 00:00:00	 aaaa
drop table t1;
set sql_mode=default;
create table t1 (
pk int primary key,
c1 varchar(8),
c2 varchar(8),
c3 varchar(8),
key(c1)
) character set utf8mb4 collate utf8mb4_0900_ai_ci;
create table t2 (
pk int primary key,
c1 varchar(8),
c2 varchar(8),
c3 varchar(8),
key(c1(1))
) character set utf8mb4 collate utf8mb4_0900_ai_ci;
create table t3 (
pk int primary key,
c1 varchar(8),
c2 varchar(8),
c3 varchar(8),
key(c1)
) character set utf8mb4 collate utf8mb4_unicode_ci;
create table t4 (
pk int primary key,
c1 varchar(8),
c2 varchar(8),
c3 varchar(8),
key key1(c1(1)),
key key2(c1)
) character set utf8mb4 collate utf8mb4_unicode_ci;
insert into t1 select * from t_range order by pk;
insert into t1 values (23,NULL,'bb','');
insert into t1 values (24,'\0','bb','');
insert into t1 values (25,'c','bb','c');
insert into t1 values (26,'aa','bb',NULL);
insert into t1 values (27,'bb','bb','');
insert into t1 values (28,'\0a','bb','');
insert into t2 select * from t1;
insert into t3 select * from t1;
insert into t4 select * from t1;
select pk,hex(c1),hex('\0 \0 '),c2,c3 from t1 where c1 = '\0 \0 ';
pk	hex(c1)	hex('\0 \0 ')	c2	c3
select pk,hex(c1),hex('\0 \0 '),c2,c3 from t2 where c1 = '\0 \0 ';
pk	hex(c1)	hex('\0 \0 ')	c2	c3
select pk,hex(c1),hex('\0 \0 '),c2,c3 from t3 where c1 = '\0 \0 ';
pk	hex(c1)	hex('\0 \0 ')	c2	c3
11		00200020		
12		00200020		NULL
13		00200020	NULL	
14		00200020	NULL	NULL
19		00200020	aa	
21		00200020	bb	
24	00	00200020	bb	
select pk,hex(c1),hex('\0 \0 '),c2,c3 from t4 where c1 = '\0 \0 ';
pk	hex(c1)	hex('\0 \0 ')	c2	c3
11		00200020		
12		00200020		NULL
13		00200020	NULL	
14		00200020	NULL	NULL
19		00200020	aa	
21		00200020	bb	
24	00	00200020	bb	
select pk,hex(c1),hex('\0 '),c2,c3 from t1 where c1 = '\0 ';
pk	hex(c1)	hex('\0 ')	c2	c3
select pk,hex(c1),hex('\0 '),c2,c3 from t2 where c1 = '\0 ';
pk	hex(c1)	hex('\0 ')	c2	c3
select pk,hex(c1),hex('\0 '),c2,c3 from t3 where c1 = '\0 ';
pk	hex(c1)	hex('\0 ')	c2	c3
11		0020		
12		0020		NULL
13		0020	NULL	
14		0020	NULL	NULL
19		0020	aa	
21		0020	bb	
24	00	0020	bb	
select pk,hex(c1),hex('\0 '),c2,c3 from t4 where c1 = '\0 ';
pk	hex(c1)	hex('\0 ')	c2	c3
11		0020		
12		0020		NULL
13		0020	NULL	
14		0020	NULL	NULL
19		0020	aa	
21		0020	bb	
24	00	0020	bb	
select pk,hex(c1),hex('\0'),c2,c3 from t1 where c1 = '\0';
pk	hex(c1)	hex('\0')	c2	c3
11		00		
12		00		NULL
13		00	NULL	
14		00	NULL	NULL
19		00	aa	
21		00	bb	
24	00	00	bb	
select pk,hex(c1),hex('\0'),c2,c3 from t2 where c1 = '\0';
pk	hex(c1)	hex('\0')	c2	c3
11		00		
12		00		NULL
13		00	NULL	
14		00	NULL	NULL
19		00	aa	
21		00	bb	
24	00	00	bb	
select pk,hex(c1),hex('\0'),c2,c3 from t3 where c1 = '\0';
pk	hex(c1)	hex('\0')	c2	c3
11		00		
12		00		NULL
13		00	NULL	
14		00	NULL	NULL
19		00	aa	
21		00	bb	
24	00	00	bb	
select pk,hex(c1),hex('\0'),c2,c3 from t4 where c1 = '\0';
pk	hex(c1)	hex('\0')	c2	c3
11		00		
12		00		NULL
13		00	NULL	
14		00	NULL	NULL
19		00	aa	
21		00	bb	
24	00	00	bb	
select pk,hex(c1),hex('a      '),c2,c3 from t4 force index(key1) where c1 = 'a      ';
pk	hex(c1)	hex('a      ')	c2	c3
select pk,hex(c1),hex('a      '),c2,c3 from t4 force index(key2) where c1 = 'a      ';
pk	hex(c1)	hex('a      ')	c2	c3
28	0061	61202020202020	bb	
select pk,hex(c1),hex('      a'),c2,c3 from t4 force index(key1) where c1 = '      a';
pk	hex(c1)	hex('      a')	c2	c3
select pk,hex(c1),hex('      a'),c2,c3 from t4 force index(key2) where c1 = '      a';
pk	hex(c1)	hex('      a')	c2	c3
select pk,hex(c1),hex('      a    '),c2,c3 from t4 force index(key1) where c1 = '      a    ';
pk	hex(c1)	hex('      a    ')	c2	c3
select pk,hex(c1),hex('      a    '),c2,c3 from t4 force index(key2) where c1 = '      a    ';
pk	hex(c1)	hex('      a    ')	c2	c3
select pk,hex(c1),hex('      \0'),c2,c3 from t4 force index(key1) where c1 = '      \0';
pk	hex(c1)	hex('      \0')	c2	c3
11		20202020202000		
12		20202020202000		NULL
13		20202020202000	NULL	
14		20202020202000	NULL	NULL
19		20202020202000	aa	
21		20202020202000	bb	
24	00	20202020202000	bb	
select pk,hex(c1),hex('      \0'),c2,c3 from t4 force index(key2) where c1 = '      \0';
pk	hex(c1)	hex('      \0')	c2	c3
11		20202020202000		
12		20202020202000		NULL
13		20202020202000	NULL	
14		20202020202000	NULL	NULL
19		20202020202000	aa	
21		20202020202000	bb	
24	00	20202020202000	bb	
select pk,hex(c1),hex('      \0    '),c2,c3 from t4 force index(key1) where c1 = '      \0    ';
pk	hex(c1)	hex('      \0    ')	c2	c3
11		2020202020200020202020		
12		2020202020200020202020		NULL
13		2020202020200020202020	NULL	
14		2020202020200020202020	NULL	NULL
19		2020202020200020202020	aa	
21		2020202020200020202020	bb	
24	00	2020202020200020202020	bb	
select pk,hex(c1),hex('      \0    '),c2,c3 from t4 force index(key2) where c1 = '      \0    ';
pk	hex(c1)	hex('      \0    ')	c2	c3
11		2020202020200020202020		
12		2020202020200020202020		NULL
13		2020202020200020202020	NULL	
14		2020202020200020202020	NULL	NULL
19		2020202020200020202020	aa	
21		2020202020200020202020	bb	
24	00	2020202020200020202020	bb	
set sql_mode=emptystring_equal_null;
select pk,hex(c1),hex('\0 \0 '),c2,c3 from t1 where c1 = '\0 \0 ';
pk	hex(c1)	hex('\0 \0 ')	c2	c3
select pk,hex(c1),hex('\0 \0 '),c2,c3 from t2 where c1 = '\0 \0 ';
pk	hex(c1)	hex('\0 \0 ')	c2	c3
select pk,hex(c1),hex('\0 \0 '),c2,c3 from t3 where c1 = '\0 \0 ';
pk	hex(c1)	hex('\0 \0 ')	c2	c3
24	00	00200020	bb	NULL
select pk,hex(c1),hex('\0 \0 '),c2,c3 from t4 where c1 = '\0 \0 ';
pk	hex(c1)	hex('\0 \0 ')	c2	c3
24	00	00200020	bb	NULL
select pk,hex(c1),hex('\0 '),c2,c3 from t1 where c1 = '\0 ';
pk	hex(c1)	hex('\0 ')	c2	c3
select pk,hex(c1),hex('\0 '),c2,c3 from t2 where c1 = '\0 ';
pk	hex(c1)	hex('\0 ')	c2	c3
select pk,hex(c1),hex('\0 '),c2,c3 from t3 where c1 = '\0 ';
pk	hex(c1)	hex('\0 ')	c2	c3
24	00	0020	bb	NULL
select pk,hex(c1),hex('\0 '),c2,c3 from t4 where c1 = '\0 ';
pk	hex(c1)	hex('\0 ')	c2	c3
24	00	0020	bb	NULL
select pk,hex(c1),hex('\0'),c2,c3 from t1 where c1 = '\0';
pk	hex(c1)	hex('\0')	c2	c3
24	00	00	bb	NULL
select pk,hex(c1),hex('\0'),c2,c3 from t2 where c1 = '\0';
pk	hex(c1)	hex('\0')	c2	c3
24	00	00	bb	NULL
select pk,hex(c1),hex('\0'),c2,c3 from t3 where c1 = '\0';
pk	hex(c1)	hex('\0')	c2	c3
24	00	00	bb	NULL
select pk,hex(c1),hex('\0'),c2,c3 from t4 where c1 = '\0';
pk	hex(c1)	hex('\0')	c2	c3
24	00	00	bb	NULL
select pk,hex(c1),hex('a      '),c2,c3 from t4 force index(key1) where c1 = 'a      ';
pk	hex(c1)	hex('a      ')	c2	c3
select pk,hex(c1),hex('a      '),c2,c3 from t4 force index(key2) where c1 = 'a      ';
pk	hex(c1)	hex('a      ')	c2	c3
28	0061	61202020202020	bb	NULL
select pk,hex(c1),hex('      a'),c2,c3 from t4 force index(key1) where c1 = '      a';
pk	hex(c1)	hex('      a')	c2	c3
select pk,hex(c1),hex('      a'),c2,c3 from t4 force index(key2) where c1 = '      a';
pk	hex(c1)	hex('      a')	c2	c3
select pk,hex(c1),hex('      a    '),c2,c3 from t4 force index(key1) where c1 = '      a    ';
pk	hex(c1)	hex('      a    ')	c2	c3
select pk,hex(c1),hex('      a    '),c2,c3 from t4 force index(key2) where c1 = '      a    ';
pk	hex(c1)	hex('      a    ')	c2	c3
select pk,hex(c1),hex('      \0'),c2,c3 from t4 force index(key1) where c1 = '      \0';
pk	hex(c1)	hex('      \0')	c2	c3
24	00	20202020202000	bb	NULL
select pk,hex(c1),hex('      \0'),c2,c3 from t4 force index(key2) where c1 = '      \0';
pk	hex(c1)	hex('      \0')	c2	c3
24	00	20202020202000	bb	NULL
select pk,hex(c1),hex('      \0    '),c2,c3 from t4 force index(key1) where c1 = '      \0    ';
pk	hex(c1)	hex('      \0    ')	c2	c3
24	00	2020202020200020202020	bb	NULL
select pk,hex(c1),hex('      \0    '),c2,c3 from t4 force index(key2) where c1 = '      \0    ';
pk	hex(c1)	hex('      \0    ')	c2	c3
24	00	2020202020200020202020	bb	NULL
select pk,hex(c1),c2,c3 from t1 where c1 =to_char('\0');
pk	hex(c1)	c2	c3
24	00	bb	NULL
explain select pk,hex(c1),hex('\0'),c2,c3 from t4 where c1 = '\0';
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	t4	NULL	ref	key1,key2	key2	35	const	7	100.00	Using where; Full scan on NULL key
explain select pk,hex(c1),hex('\0'),c2,c3 from t4 where c1 = ' ';
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	t4	NULL	ref	key1,key2	key2	35	const	7	100.00	Using where; Full scan on NULL key
explain select pk,hex(c1),hex('\0'),c2,c3 from t4 where c1 = '\0 ';
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	t4	NULL	ref	key1,key2	key2	35	const	7	100.00	Using where; Full scan on NULL key
explain select pk,hex(c1),hex('\0'),c2,c3 from t4 where c1 = ' a';
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	t4	NULL	ref	key1,key2	key2	35	const	1	100.00	NULL
explain select pk,hex(c1),hex('\0'),c2,c3 from t4 where c1 = 1;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	t4	NULL	ALL	key1,key2	NULL	NULL	NULL	18	10.00	Using where
explain select pk,c1,c2,c3 from t1 where c1 =to_char('\0');
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	t1	NULL	ref	c1	c1	35	const	7	100.00	Using where; Full scan on NULL key
set sql_mode=default;
explain select pk,hex(c1),hex('\0'),c2,c3 from t4 where c1 = 1;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	<gather2>	NULL	ALL	NULL	NULL	NULL	NULL	18	10.00	Parallel execute (1 workers)
2	SIMPLE	t4	NULL	ALL	key1,key2	NULL	NULL	NULL	18	10.00	Using where
explain select pk,hex(c1),c2,c3 from t1 where c1 =to_char('\0');
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	<gather2>	NULL	ALL	NULL	NULL	NULL	NULL	7	100.00	Parallel execute (1 workers)
2	SIMPLE	t1	NULL	ref	c1	c1	35	const	7	100.00	NULL
drop table t_range,t1,t2,t3,t4;
