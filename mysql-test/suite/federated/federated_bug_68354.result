CREATE DATABASE federated;
CREATE DATABASE federated;
SET @OLD_MASTER_CONCURRENT_INSERT= @@GLOBAL.CONCURRENT_INSERT;
SET @@GLOBAL.CONCURRENT_INSERT= 0;
SET @OLD_SLAVE_CONCURRENT_INSERT= @@GLOBAL.CONCURRENT_INSERT;
SET @@GLOBAL.CONCURRENT_INSERT= 0;
DROP TABLE IF EXISTS federated.t1;
Warnings:
Note	1051	Unknown table 'federated.t1'
CREATE TABLE federated.t1 (
`id` int(20) NOT NULL,
`dummy` int(20) DEFAULT NULL,
PRIMARY KEY (`id`))
ENGINE="MyISAM"
  DEFAULT CHARSET=latin1;
INSERT INTO federated.t1 (`id`) VALUES
(1001), (1002), (1003), (1004), (1005),
(1006), (1007), (1008), (1009), (1010);
CREATE TABLE federated.t1 (
`id` int(20) NOT NULL,
`dummy` int(20) DEFAULT NULL,
PRIMARY KEY (`id`))
ENGINE="FEDERATED"
  DEFAULT CHARSET=latin1
CONNECTION='mysql://root@127.0.0.1:SLAVE_PORT/federated/t1';
CREATE TABLE federated.t2 (
`id` int(20) NOT NULL,
`dummy` int(20) NOT NULL,
PRIMARY KEY (`id`))
ENGINE="MyISAM"
  DEFAULT CHARSET=latin1;
INSERT INTO federated.t2 (`id`, `dummy`) VALUES (1005, 5);
SELECT * FROM federated.t1;
id	dummy
1001	NULL
1002	NULL
1003	NULL
1004	NULL
1005	NULL
1006	NULL
1007	NULL
1008	NULL
1009	NULL
1010	NULL
UPDATE federated.t1 ft1 INNER JOIN federated.t2 ft2 ON ft1.id = ft2.id SET ft1.dummy = ft2.dummy WHERE ft1.dummy IS NULL;
SELECT * FROM federated.t1;
id	dummy
1001	NULL
1002	NULL
1003	NULL
1004	NULL
1005	5
1006	NULL
1007	NULL
1008	NULL
1009	NULL
1010	NULL
DELETE FROM federated.t1 WHERE id = 1005;
SELECT * FROM federated.t1 WHERE id = 1005;
id	dummy
SELECT * FROM federated.t1;
id	dummy
1001	NULL
1002	NULL
1003	NULL
1004	NULL
1006	NULL
1007	NULL
1008	NULL
1009	NULL
1010	NULL
DROP TABLE federated.t2;
DROP TABLE federated.t1;
DROP TABLE federated.t1;
SET @@GLOBAL.CONCURRENT_INSERT= @OLD_MASTER_CONCURRENT_INSERT;
SET @@GLOBAL.CONCURRENT_INSERT= @OLD_SLAVE_CONCURRENT_INSERT;
DROP TABLE IF EXISTS federated.t1;
DROP DATABASE federated;
DROP TABLE IF EXISTS federated.t1;
DROP DATABASE federated;
